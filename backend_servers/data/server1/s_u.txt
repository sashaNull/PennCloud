susan123@/ items [D@folder1]
susan123@/folder1/ items [F@file1.txt;;F@file2.doc]
susan123@/folder1/file1.txt content U29ycnksIEkgY2Fubm90IGhlbHAgd2l0aCB0aGF0Lg==
susan123@/folder1/file2.doc content U29ycnksIEkgY2Fubm90IGhlbHAgZG9jLg==
samantha34@/ items [D@documents]
samantha34@/documents/ items [F@essay.docx;;F@presentation.pptx]
samantha34@/documents/essay.docx content SSBoYWQsIEkgY2Fubm90IGFueSBkZWFsIHdheSB0aGF0Lg==
samantha34@/documents/presentation.pptx content VGhpcyBpcyBhIGxvdCBvZiBwcmVzZW50YXRpb24gcGVyc29uYWwgY29udGVudC4=
sophie89@/ items [D@photos]
sophie89@/photos/ items [F@vacation.jpg;;F@family.png;;F@birthday.jpeg]
sophie89@/photos/vacation.jpg content VGhpcyBpcyBhIG5ldyBjb250ZW50IGZpbGUgaW4gdGhpcyBlbmQgY2FzZSBvZiB2YWNhdGlvbiBwYXJhbWV0ZXJzLg==
sophie89@/photos/family.png content VGhpcyBpcyBhIG5ldyBjb250ZW50IGZpbGUgaW4gdGhpcyBlbmQgY2FzZSBvZiBmYW1pbHkucG5n
sophie89@/photos/birthday.jpeg content VGhpcyBpcyBhIG5ldyBjb250ZW50IGZpbGUgaW4gdGhpcyBlbmQgY2FzZSBvZiBiaXRoZGFyeS5qcGVn
sean_w@/ items [D@work]
sean_w@/work/ items [F@project_plan.docx;;F@presentation.pptx]
sean_w@/work/project_plan.docx content U29ycnksIEkgY2Fubm90IG5lZWQgdG8gYXBwIG1ha2luZyBwcm9qZWN0IHBsYW4u
sean_w@/work/presentation.pptx content VGhpcyBpcyBhIG5ldyBjb250ZW50IGZpbGUgaW4gdGhpcyBlbmQgY2FzZSBvZiBwcmVzZW50YXRpb24gcGVyc29uYWwu
sophia_l@/ items [D@projects]
sophia_l@/projects/ items [F@proposal.docx;;F@budget.xlsx;;F@timeline.pdf]
sophia_l@/projects/proposal.docx content VGhpcyBpcyBhIG5ldyBwcm9qZWN0IGZpbGUgaW4gdGhpcyBlbmQgY2FzZSBvZiBwcm9qZWN0cyBhcmUgYWxyZWFkeSBkZWFsLg==
sophia_l@/projects/budget.xlsx content VGhpcyBpcyBhIG5ldyBjb3JyZXNwb25kaW5nIGZpbGUgaW4gdGhpcyBlbmQgY2FzZSBvZiBidWRnZXQu
sophia_l@/projects/timeline.pdf content VGhpcyBpcyBhIG5ldyB0aW1lbGluZSBmaWxlIGluIHRoaXMgZW5kIGNhc2Ugb2YgdGltZWxpbmUgcHJlc2VudGF0aW9uLg==
theodore_m@/ items [D@personal]
theodore_m@/personal/ items [F@diary.txt;;F@photos.zip]
theodore_m@/personal/diary.txt content VGhpcyBpcyBhIG5ldyBkaWFyeSBtb3ZlbWVudCBkaXJlY3Qu
theodore_m@/personal/photos.zip content U29ycnksIEkgY2Fubm90IG5lZWQgdG8gYXBwIHNpbWlsYXIgcGhvdG9zLg==
ursula_k@/ items [D@work]
ursula_k@/work/ items [F@report.docx;;F@presentation.pptx]
ursula_k@/work/report.docx content VGhpcyBpcyBhIG5ldyByZXBvcnQu
ursula_k@/work/presentation.pptx content VGhpcyBpcyBhIG5ldyBjb250ZW50IGZpbGUgaW4gdGhpcyBlbmQgY2FzZSBvZiBwcmVzZW50YXRpb24gcGVyc29uYWwu
sarah_k@/ items [D@projects]
sarah_k@/projects/ items [F@proposal.docx;;F@budget.xlsx;;F@timeline.pdf]
sarah_k@/projects/proposal.docx content VGhpcyBpcyBhIG5ldyBwcm9qZWN0IGZpbGUgaW4gdGhpcyBlbmQgY2FzZSBvZiBwcm9qZWN0cyBhcmUgYWxyZWFkeSBkZWFsLg==
sarah_k@/projects/budget.xlsx content VGhpcyBpcyBhIG5ldyBjb3JyZXNwb25kaW5nIGZpbGUgaW4gdGhpcyBlbmQgY2FzZSBvZiBidWRnZXQu
sarah_k@/projects/timeline.pdf content VGhpcyBpcyBhIG5ldyB0aW1lbGluZSBmaWxlIGluIHRoaXMgZW5kIGNhc2Ugb2YgdGltZWxpbmUgcHJlc2VudGF0aW9uLg==
tom_b@/ items [D@personal]
tom_b@/personal/ items [F@diary.txt;;F@photos.zip]
tom_b@/personal/diary.txt content VGhpcyBpcyBhIG5ldyBkaWFyeSBtb3ZlbWVudCBkaXJlY3Qu
tom_b@/personal/photos.zip content U29ycnksIEkgY2Fubm90IG5lZWQgdG8gYXBwIHNpbWlsYXIgcGhvdG9zLg==
upt_g@/ items [D@work]
upt_g@/work/ items [F@report.docx;;F@presentation.pptx]
upt_g@/work/report.docx content VGhpcyBpcyBhIG5ldyByZXBvcnQu
upt_g@/work/presentation.pptx content VGhpcyBpcyBhIG5ldyBjb250ZW50IGZpbGUgaW4gdGhpcyBlbmQgY2FzZSBvZiBwcmVzZW50YXRpb24gcGVyc29uYWwu
sashaNull@/ items [D@asdsaiodj]
sashaNull@/asdsaiodj/ items [F@README.md]
sashaNull@/asdsaiodj/README.md content IyBwZW5uY2xvdWQKUExlYXNlIG9wZW4gdGhlIHppcCBmaWxlIGFuZCB0aGUgZGV0YWlscyBhcmUgaW4gdGhlIHRoZXJlCg==
tronglu123@/ items [D@code;;F@README.md;;F@chatserver.cc;;F@proxy.cc]
tronglu123@/README.md content IyBVcGVubiBDSVM1MDUgSFczCk11bHRpY2FzdCBzZXJ2ZXJzL2NsaWVudHMgdGhhdCBkaXN0cmlidXRlIGNoYXQgbWVzc2FnZXMgdG8gZGlmZmVyZW50IGdyb3VwICAKVGhlIHNlcnZlciBzdXBwb3J0cyB1bm9yZGVyZWQsIEZJRk8gYW5kIHRvdGFsIG9yZGVyaW5ncyAgCgojIyBTeW50YXgKLi9jaGF0Y2xpZW50IFtTZXJ2ZXIncyBJUDpwb3J0XSAgCi4vY2hhdHNlcnZlciBbLW8gb3JkZXJdIFstdl0gW2NvbmZpZyBmaWxlXSBbaW5kZXhdICAKLW8gZm9sbG93ZWQgYnkgb3JkZXJpbmcgdHlwZSwgLXYgaXMgZGVidWcgZmxhZywgY29uZmlnIGZpbGUgaXMgdGhlIGZpbGUgdGhhdCBzdG9yZSBhZGRyZXNzIG9mIHNlcnZlcnMsIGluZGV4IGluZGljYXRlIHdoaWNoIGxpbmUgaW4gdGhlIGZpbGUgaXMgdGhpcyBzZXJ2ZXIKCiMjIFVzYWdlCiMjIyBDbGllbnQKL2pvaW4gW2dyb3VwXTogam9pbiBhIGNoYXQgcm9vbSwgdGhpcyBmYWlscyBpZiBhbHJlYWR5IGluIGEgY2hhdCByb29tICAKL25pY2sgW25hbWVdOiBpbml0IG5hbWUgd2lsbCBiZSBjbGllbnQncyBJUDpwb3J0LCB1c2UgdGhpcyB0byB1cGRhdGUgbmFtZSAgCi9wYXJ0OiBsZWF2ZSBjdXJyZW50IGNoYXQgcm9vbSAgCi9xdWl0OiBxdWl0IGFuZCBjbG9zZSBjbGllbnQgIApJbnB1dCB0aGF0IGRvZXNuJ3Qgc3RhcnQgd2l0aCAiLyIgaXMgY29uc2lkZXJlZCBhcyBhIG1lc3NhZ2UgdGhhdCBicm9hZGNhc3QgdG8gYWxsIGNsaWVudHMgaW4gdGhlIHNhbWUgY2hhdCByb29tICAKCiMjIFRlc3QKIyMjIFVzZSBwcm94eSB0byBzaW11bGF0ZSBtZXNzYWdlIGRlbGF5IGluIGxvY2FsaG9zdAouL3Byb3h5IFstdl0gWy1kIG1heCBkZWxheSBtaWNyb3NlY29uZHNdIFstbCBsb3NzUHJvYmFiaWxpdHldIFtjb25maWcgZmlsZV0gIApJZiB1c2luZyBwcm94eSwgY29uZmlnIGZpbGUgc2hvdWxkIGhhdmUgMiBhZGRyZXNzZXMgZm9yIGV2ZXJ5IHNlcnZlcjogZm9yd2FyZCBhbmQgYmluZC4gT3RoZXJ3aXNlIHNlcnZlcnMgaGF2ZSAxIGFkZHJlc3MuCiMjIyBVc2Ugc3RyZXNzdGVzdCB0byB2ZXJpZnkgY2FwYWNpdHkgYW5kIG9yZGVyaW5nCi4vc3RyZXNzdGVzdCBbLWQgZGVsYXldIFstbyBvcmRlcl0gWy1jICNjbGllbnRzXSBbLW0gI21lc3NhZ2VzXSBbLWcgI2dyb3VwXSBbY29uZmlnIGZpbGVdICAKS2VlcCBhbGwgc2VydmVycyBsaXN0ZWQgaW4gY29uZmlnIGZpbGUgcnVubmluZyBiZWZvcmUgc3RyZXNzdGVzdAoKIyMgVE9ETzogYWRkIGNhdXNhbCBvcmRlcmluZyBhbmQgbWVzc2FnZSBsb3NzZXMgaGFuZGxpbmcK
tronglu123@/chatclient.cc content I2luY2x1ZGUgPHN0ZGxpYi5oPgojaW5jbHVkZSA8c3RkaW8uaD4KI2luY2x1ZGUgPHVuaXN0ZC5oPgojaW5jbHVkZSA8aW9zdHJlYW0+CiNpbmNsdWRlIDxzdHJpbmcuaD4KI2luY2x1ZGUgPHN0cmluZz4KI2luY2x1ZGUgPGFycGEvaW5ldC5oPgp1c2luZyBuYW1lc3BhY2Ugc3RkOwoKLy8gZ2xvYmFsCmNvbnN0IGludCBCVUZGX1NJWkUgPSAxMDAwOwoKaW50IG1haW4oaW50IGFyZ2MsIGNoYXIgKmFyZ3ZbXSkKewoJaWYgKGFyZ2MgIT0gMikgewoJCWNlcnIgPDwgIld1ZGFvIExpbmcgKHd1ZGFvKSBAVVBlbm5cbiI7CgkJZXhpdCgxKTsKCX0KCgkvLyBjcmVhdGUgYSBuZXcgc29ja2V0KFVEUCkKCWludCBzb2NrID0gc29ja2V0KFBGX0lORVQsIFNPQ0tfREdSQU0sIDApOwoJaWYgKHNvY2sgPCAwKXsKCQljZXJyIDw8ICJjYW5ub3Qgb3BlbiBzb2NrZXRcclxuIjsKCQlleGl0KDIpOwoJfQogICAgLy8gc2V0IHBvcnQgZm9yIHJldXNlCgljb25zdCBpbnQgUkVVU0UgPSAxOwoJc2V0c29ja29wdChzb2NrLCBTT0xfU09DS0VULCBTT19SRVVTRUFERFIsICZSRVVTRSwgc2l6ZW9mKFJFVVNFKSk7CgoJLy8gcGFyc2UgY29tbWFuZCBhbmQgY29ubmVjdCB0byBzZXJ2ZXIKCXN0cnVjdCBzb2NrYWRkcl9pbiBkZXN0OwoJYnplcm8oJmRlc3QsIHNpemVvZihkZXN0KSk7CglkZXN0LnNpbl9mYW1pbHkgPSBBRl9JTkVUOwoKCWNoYXIqIHRva2VuID0gc3RydG9rKGFyZ3ZbMV0sIjoiKTsgLy8gbm93IHRva2VuIGlzIElQCglpbmV0X3B0b24oQUZfSU5FVCwgdG9rZW4gLCAmZGVzdC5zaW5fYWRkcik7Cgl0b2tlbiA9IHN0cnRvayhOVUxMLCI6Iik7IC8vIG5vdyB0b2tlbiBpcyBwb3J0CglkZXN0LnNpbl9wb3J0ID0gaHRvbnMoYXRvaSh0b2tlbikpOwoKCS8vIHNvdXJjZSBhZGRyZXNzCglzdHJ1Y3Qgc29ja2FkZHJfaW4gc3JjOwoJc29ja2xlbl90IHNyY19zaXplID0gc2l6ZW9mKHNyYyk7CgoJd2hpbGUgKHRydWUpewoJCS8vIHVzZSBzZWxlY3QgZm9yIEkvTyB3YWl0aW5nLCByZWZlcmVuY2U6IGh0dHBzOi8vd3d3LmdudS5vcmcvc29mdHdhcmUvbGliYy9tYW51YWwvaHRtbF9ub2RlL1dhaXRpbmctZm9yLUlfMDAyZk8uaHRtbAoJCWZkX3NldCByZWFkX3NldDsKCgkJRkRfWkVSTygmcmVhZF9zZXQpOwoJCUZEX1NFVChTVERJTl9GSUxFTk8sICZyZWFkX3NldCk7IC8vIGtleWJvYXJkCgkJRkRfU0VUKHNvY2ssICZyZWFkX3NldCk7IC8vIHNvY2tldAoKCQkvLyBibG9jayB1bnRpbCBJL08gaXMgcmVhZHkKCQlpbnQgcmVhZGFibGUgPSBzZWxlY3Qoc29jaysxLCAmcmVhZF9zZXQsIE5VTEwsIE5VTEwsIE5VTEwpOwoKCQljaGFyIGJ1ZmZbQlVGRl9TSVpFXTsKCQlpbnQgcmVhZF9sZW47CgoJCWlmIChGRF9JU1NFVChTVERJTl9GSUxFTk8sICZyZWFkX3NldCkpIHsKCQkJLy8ga2V5Ym9hcmQgaW5wdXQKCQkJcmVhZF9sZW4gPSByZWFkKFNURElOX0ZJTEVOTywgYnVmZiwgQlVGRl9TSVpFKTsKCQkJYnVmZltyZWFkX2xlbi0xXSA9IDA7IC8vIHJlbW92ZSBcbiBhdCB0aGUgZW5kCgkJCXNlbmR0byhzb2NrLCBidWZmLCBzdHJsZW4oYnVmZiksIDAsIChzdHJ1Y3Qgc29ja2FkZHIqKSAmZGVzdCwgc2l6ZW9mKGRlc3QpKTsKCgkJCWNoYXIqIHRva2VuID0gc3RydG9rKGJ1ZmYsICIgIik7CgkJCWlmIChzdHJjYXNlY21wKHRva2VuLCAiL3F1aXQiKSA9PSAwKSB7CgkJCQlicmVhazsKCQkJfQoJCX0gZWxzZSB7CgkJCS8vIHJlc3BvbnNlIGZyb20gc2VydmVyCgkJCXJlYWRfbGVuID0gcmVjdmZyb20oc29jaywgYnVmZiwgc2l6ZW9mKGJ1ZmYpLCAwLCAoc3RydWN0IHNvY2thZGRyKikgJnNyYywgJnNyY19zaXplKTsKCQkJY291dCA8PCBidWZmIDw8IGVuZGw7CgkJfQoJCS8vIGNsZWFyIGJ1ZmZlciBieSBzZXR0aW5nIHplcm9zCgkJbWVtc2V0KGJ1ZmYsIDAsIEJVRkZfU0laRSk7Cgl9CgoJLy8gY2xvc2Ugc29ja2V0CgljbG9zZShzb2NrKTsKCXJldHVybiAwOwp9ICAK
tronglu123@/chatserver.cc content I2luY2x1ZGUgPHN0ZGxpYi5oPgojaW5jbHVkZSA8c3RkaW8uaD4KI2luY2x1ZGUgPHVuaXN0ZC5oPgojaW5jbHVkZSA8aW9zdHJlYW0+CiNpbmNsdWRlIDxmc3RyZWFtPgojaW5jbHVkZSA8c3N0cmVhbT4KI2luY2x1ZGUgPHN0cmluZy5oPgojaW5jbHVkZSA8c3RyaW5nPgojaW5jbHVkZSA8YXJwYS9pbmV0Lmg+CiNpbmNsdWRlIDx2ZWN0b3I+CiNpbmNsdWRlIDx0aW1lLmg+CiNpbmNsdWRlIDxtYXA+CnVzaW5nIG5hbWVzcGFjZSBzdGQ7CgovLyBjb25zdGFudAovLyBvcmRlcmluZwpjb25zdCBpbnQgVU5PUkRFUkVEID0gMDsKY29uc3QgaW50IEZJRk8gPSAxOwpjb25zdCBpbnQgVE9UQUwgPSAyOwovLyBtZXNzYWdlIHR5cGUgZm9yIHRvdGFsIG9yZGVyaW5nCmNvbnN0IGludCBJTklUSUFMID0gMDsKY29uc3QgaW50IFBST1BPU0UgPSAxOwpjb25zdCBpbnQgREVMSVZFUiA9IDI7Ci8vIHNpemUKY29uc3QgaW50IEJVRkZfU0laRSA9IDEwMDA7CmNvbnN0IGludCBHUk9VUF9TSVpFID0gMTA7CmNvbnN0IGludCBOQU1FX1NJWkUgPSA1MDsKCi8vIGNsYXNzCnN0cnVjdCBDbGllbnQgewoJc29ja2FkZHJfaW4gYWRkcjsKCWludCBncm91cDsKCXN0cmluZyBuaWNrbmFtZTsKCglDbGllbnQoc29ja2FkZHJfaW4gYWRkcl8pewoJCWFkZHIgPSBhZGRyXzsKCQlncm91cCA9IDA7Cgl9Cn07CgpzdHJ1Y3QgTWVzc2FnZSB7CglpbnQgc2VxOwoJaW50IG5vZGU7Cglib29sIGRlbGl2ZXI7CgoJTWVzc2FnZShpbnQgX3NlcSwgaW50IF9ub2RlKXsKCQlzZXEgPSBfc2VxOwoJCW5vZGUgPSBfbm9kZTsKCQlkZWxpdmVyID0gZmFsc2U7Cgl9Cn07CnN0cnVjdCBDb21wYXJlIHsKCWJvb2wgb3BlcmF0b3IoKShjb25zdCBNZXNzYWdlJiBtMSwgY29uc3QgTWVzc2FnZSYgbTIpIGNvbnN0IHsKCQkvLyBtZXNzYWdlIHNlcSwgbm9kZSBpZCBhcyB0aWUgYnJlYWtlcgoJCWlmIChtMS5zZXEgPCBtMi5zZXEgfHwgKG0xLnNlcSA9PSBtMi5zZXEgJiYgbTEubm9kZSA8IG0yLm5vZGUpKSB7CgkJCXJldHVybiB0cnVlOwoJCX0gZWxzZSB7CgkJCXJldHVybiBmYWxzZTsKCQl9Cgl9Cn07CgovLyBnbG9iYWwKYm9vbCBERUJVRyA9IGZhbHNlOwppbnQgT1JERVIgPSBVTk9SREVSRUQ7CmludCBTRUxGID0gMDsKdmVjdG9yPHNvY2thZGRyX2luPiBTRVJWRVJTOwp2ZWN0b3I8Q2xpZW50PiBDTElFTlRTOwovLyBmaWZvCnZlY3RvcjxpbnQ+IExPQ0FMX1NFUTsgLy8gbG9jYWwgc2VxdWVuY2UgbnVtYmVyIGZvciBncm91cCBnIChmb3IgdGhpcyBzZXJ2ZXIpCnZlY3Rvcjx2ZWN0b3IgPGludD4gPiBSRUNWX1NFUTsgLy8gc2VxdWVuY2UgbnVtYmVyIG9mIHRoZSBtb3N0IHJlY2VudCBtZXNzYWdlIGZvciBncm91cCBnIHJlY2VpdmVkIGZyb20gTgp2ZWN0b3I8dmVjdG9yPCBtYXAgPGludCwgc3RyaW5nPiA+ID4gRklGT19IT0xEQkFDSzsgLy8gaG9sZGJhY2sgcXVldWUgdGhhdCBjb250YWlucyBtZXNzYWdlcyBmb3IgZ3JvdXAgZyByZWNlaXZlZCBmcm9tIE4KLy8gdG90YWwKdmVjdG9yPGludD4gUFJPUE9TRUQ7IC8vIGhpZ2hlc3QgcHJvcG9zZWQgc2VxdWVuY2UgbnVtYmVyIGZvciBncm91cCBnCnZlY3RvcjxpbnQ+IEFHUkVFRDsgLy8gaGlnaGVzdCBhZ3JlZWQgc2VxdWVuY2UgbnVtYmVyIGZvciBncm91cCBnCnZlY3RvcjwgbWFwPE1lc3NhZ2UsIHN0cmluZywgQ29tcGFyZT4gPiAgVE9UQUxfSE9MREJBQ0s7IC8vIGhvbGRiYWNrIHF1ZXVlIHRoYXQgY29udGFpbnMgbWVzc2FnZXMgcmVjZWl2ZWQgZm9yIGdyb3VwIGcKbWFwPCBzdHJpbmcsIHZlY3RvcjwgTWVzc2FnZSA+ID4gUFJPUE9TQUxTOwoKCi8vIGRlY2xhcmUgZnVuY3Rpb24Kc29ja2FkZHJfaW4gcGFyc2VfYWRkcihjaGFyKiBhZGRyZXNzKTsKc29ja2FkZHJfaW4gcmVhZF9jb25maWcoc3RyaW5nIGNvbmZpZ19maWxlLCBpbnQgaW5kZXgpOwp2b2lkIGluaXRfZ2xvYmFsKCk7CmludCBjaGF0X3NlcnZlcihzb2NrYWRkcl9pbiBzZWxmKTsKYm9vbCBpc19jbGllbnQoc29ja2FkZHJfaW4gc3JjLCBpbnQqIGluZGV4KTsKYm9vbCBpc19zZXJ2ZXIoc29ja2FkZHJfaW4gc3JjLCBpbnQqIGluZGV4KTsKdm9pZCBoYW5kbGVfY2xpZW50KGludCBjbGllbnRfaW5kZXgsIGNoYXIqIGJ1ZmYsIGludCBzb2NrKTsKY2hhciogcHJlcGFyZV9kZWJ1ZygpOwpjaGFyKiBwcmVwYXJlX21zZyhjaGFyKiBidWZmLCBDbGllbnQqIGNsaWVudCk7CnZvaWQgc2VuZF90b19jbGllbnRzKGludCBzb2NrLCBjaGFyKiBtZXNzYWdlLCBpbnQgZ3JvdXApOwp2b2lkIGZvcndhcmRfdG9fc2VydmVycyhpbnQgc29jaywgY2hhciogbWVzc2FnZSwgYm9vbCBzZWxmKTsKdm9pZCBoYW5kbGVfZmlmbyhpbnQgc29jaywgY2hhciogbWVzc2FnZSwgaW50IGdyb3VwLCBpbnQgc2VuZGVyLCBpbnQgc2VxKTsKdm9pZCBoYW5kbGVfdG90YWwoaW50IHNvY2ssIGNoYXIqIG1lc3NhZ2UsIGludCBncm91cCwgaW50IHNlbmRlciwgaW50IHNlcSwgaW50IG5vZGUsIGludCB0eXBlKTsKCgppbnQgbWFpbihpbnQgYXJnYywgY2hhciAqYXJndltdKQp7CglpZiAoYXJnYyA8IDIpIHsKCQljZXJyIDw8ICJXdWRhbyBMaW5nICh3dWRhbykgQFVQZW5uXG4iOwoJCWV4aXQoMSk7Cgl9CgoJaW50IGM7CgkvLyBnZXRvcHQoKSBmb3IgY29tbWFuZCBwYXJzaW5nCgl3aGlsZSgoYz1nZXRvcHQoYXJnYyxhcmd2LCJvOnYiKSkhPS0xKXsKCQlzd2l0Y2goYyl7CgkJY2FzZSAnbyc6IC8vb3JkZXIKCQkJaWYgKHN0cmNhc2VjbXAob3B0YXJnLCAidW5vcmRlcmVkIikgPT0gMCl7CgkJCQlPUkRFUiA9IFVOT1JERVJFRDsKCQkJfSBlbHNlIGlmIChzdHJjYXNlY21wKG9wdGFyZywgImZpZm8iKSA9PSAwKSB7CgkJCQlPUkRFUiA9IEZJRk87CgkJCX0gZWxzZSBpZiAoc3RyY2FzZWNtcChvcHRhcmcsICJ0b3RhbCIpID09IDApIHsKCQkJCU9SREVSID0gVE9UQUw7CgkJCX0gZWxzZSB7CgkJCQljZXJyIDw8ICJPcmRlcmluZyBzdXBwb3J0ZWQgYXJlIHVub3JkZXJlZCwgZmlmbyBhbmQgdG90YWxcbiI7CgkJCQlleGl0KDEpOwoJCQl9CgkJCWJyZWFrOwoJCWNhc2UgJ3YnOiAvL2RlYnVnIG1vZGUKCQkJREVCVUcgPSB0cnVlOwoJCQlicmVhazsKCQlkZWZhdWx0OgoJCQljZXJyIDw8IlN5bnRheDogIjw8IGFyZ3ZbMF0gPDwgIiBbLW8gb3JkZXJdIFstdl0gPGNvbmZpZyBmaWxlPiA8aW5kZXg+XG4iOwoJCQlleGl0KDEpOwoJCX0KCX0KCgkvLyBnZXQgY29uZmlnIGZpbGUKCWlmIChvcHRpbmQgPT0gYXJnYykgewoJCWNlcnIgPDwiU3ludGF4OiAiPDwgYXJndlswXSA8PCAiIFstbyBvcmRlcl0gWy12XSA8Y29uZmlnIGZpbGU+IDxpbmRleD5cbiI7CgkJZXhpdCgxKTsKCX0KCXN0cmluZyBjb25maWdfZmlsZSA9IGFyZ3Zbb3B0aW5kXTsKCgkvLyBnZXQgaW5kZXgKCW9wdGluZCsrOwoJaWYgKG9wdGluZCA9PSBhcmdjKSB7CgkJY2VyciA8PCJTeW50YXg6ICI8PCBhcmd2WzBdIDw8ICIgWy1vIG9yZGVyXSBbLXZdIDxjb25maWcgZmlsZT4gPGluZGV4PlxuIjsKCQlleGl0KDEpOwoJfQoJU0VMRiA9IGF0b2koYXJndltvcHRpbmRdKTsKCgkvLyByZWFkIGNvbmZpZyBmaWxlCglzb2NrYWRkcl9pbiBzZWxmID0gcmVhZF9jb25maWcoY29uZmlnX2ZpbGUsIFNFTEYpOwoKCS8vIGluaXQgZ2xvYmFsIHZhcmlhYmxlIGZvciBvcmRlcmluZwoJaW5pdF9nbG9iYWwoKTsKCgljaGF0X3NlcnZlcihzZWxmKTsKfSAgCgpzb2NrYWRkcl9pbiBwYXJzZV9hZGRyKGNoYXIqIGFkZHJlc3MpewoJLy8gaW5pdCBhIHNvY2sgYWRkcmVzcwoJc3RydWN0IHNvY2thZGRyX2luIGFkZHI7CgliemVybygmYWRkciwgc2l6ZW9mKGFkZHIpKTsKCWFkZHIuc2luX2ZhbWlseSA9IEFGX0lORVQ7CgoJLy8gSVAKCWNoYXIqIHRva2VuID0gc3RydG9rKGFkZHJlc3MsICI6Iik7CglpbmV0X3B0b24oQUZfSU5FVCwgdG9rZW4sICZhZGRyLnNpbl9hZGRyKTsKCiAgICAvLyBwb3J0Cgl0b2tlbiA9IHN0cnRvayhOVUxMLCAiOiIpOwoJYWRkci5zaW5fcG9ydCA9IGh0b25zKGF0b2kodG9rZW4pKTsKCglyZXR1cm4gYWRkcjsKfQoKc29ja2FkZHJfaW4gcmVhZF9jb25maWcoc3RyaW5nIGNvbmZpZ19maWxlLCBpbnQgaW5kZXgpewoJLy8gb3BlbiB0aGUgZmlsZSBmb3IgcmVhZGluZwoJaWZzdHJlYW0gY29uZmlnKGNvbmZpZ19maWxlKTsKCgkvLyBzZWxmIGFkZHJlc3MgZm9yIGJpbmRpbmcKCXNvY2thZGRyX2luIHNlbGY7CgoJaW50IGkgPSAwOwoJc3RyaW5nIGxpbmU7Cgl3aGlsZSAoZ2V0bGluZShjb25maWcsIGxpbmUpKXsKCQljaGFyIGFkZHJlc3Nlc1tsaW5lLmxlbmd0aCgpKzFdOwoJCXN0cmNweShhZGRyZXNzZXMsIGxpbmUuY19zdHIoKSk7CgoJCS8vIGEgbGluZSBtYXkgY29udGFpbnMgMSBvciAyIGFkZHJlc3MKCQkvLyBpZiBub3QgdXNpbmcgcHJveHksIGZvcndhcmQgYW5kIGJpbmQgbXVzdCBiZSB0aGUgc2FtZQoJCWNoYXIqIGZvcndhcmQgPSBzdHJ0b2soYWRkcmVzc2VzLCAiLCIpOwoJCWNoYXIqIGJpbmQgPSBzdHJ0b2soTlVMTCwgIiwiKTsKCgkJU0VSVkVSUy5wdXNoX2JhY2socGFyc2VfYWRkcihmb3J3YXJkKSk7CgkJaWYgKGk9PWluZGV4LTEpewoJCQlpZiAoYmluZD09TlVMTCl7CgkJCQlzZWxmID0gcGFyc2VfYWRkcihmb3J3YXJkKTsKCQkJfSBlbHNlIHsKCQkJCXNlbGYgPSBwYXJzZV9hZGRyKGJpbmQpOwoJCQl9CgkJfQoJCWkrKzsKCX0KCXJldHVybiBzZWxmOwp9Cgp2b2lkIGluaXRfZ2xvYmFsKCl7CglpZiAoT1JERVI9PVVOT1JERVJFRCkgewoJCXJldHVybjsKCX0gZWxzZSBpZiAoT1JERVI9PUZJRk8pIHsKCQlmb3IgKGludCBpID0gMDsgaSA8IEdST1VQX1NJWkU7IGkrKykgewoJCQlMT0NBTF9TRVEucHVzaF9iYWNrKDApOwoJCQl2ZWN0b3IgPGludD4gdjI7CgkJCVJFQ1ZfU0VRLnB1c2hfYmFjayh2Mik7CgkJCXZlY3RvcjwgbWFwPCBpbnQsIHN0cmluZyA+ID4gdjE7CgkJCUZJRk9fSE9MREJBQ0sucHVzaF9iYWNrKHYxKTsKCgkJCWZvciAoaW50IGogPSAwOyBqIDwgU0VSVkVSUy5zaXplKCk7IGorKykgewoJCQkJUkVDVl9TRVFbaV0ucHVzaF9iYWNrKDApOwoJCQkJbWFwPCBpbnQsIHN0cmluZyA+IG07CgkJCQlGSUZPX0hPTERCQUNLW2ldLnB1c2hfYmFjayhtKTsKCQkJfQoJCX0KCX0gZWxzZSBpZiAoT1JERVI9PVRPVEFMKSB7CgkJZm9yIChpbnQgaSA9IDA7IGkgPCBHUk9VUF9TSVpFOyBpKyspewoJCQlQUk9QT1NFRC5wdXNoX2JhY2soMCk7CgkJCUFHUkVFRC5wdXNoX2JhY2soMCk7CgkJCW1hcDxNZXNzYWdlLCBzdHJpbmcsIENvbXBhcmU+IG07CgkJCVRPVEFMX0hPTERCQUNLLnB1c2hfYmFjayhtKTsKCQl9Cgl9Cn0KCmludCBjaGF0X3NlcnZlcihzb2NrYWRkcl9pbiBzZWxmKXsKCS8vIGNyZWF0ZSBhIG5ldyBzb2NrZXQoVURQKSBhbmQgYmluZAoJaW50IHNvY2sgPSBzb2NrZXQoUEZfSU5FVCwgU09DS19ER1JBTSwgMCk7CglpZiAoc29jayA8IDApewoJCWNlcnIgPDwgImNhbm5vdCBvcGVuIHNvY2tldFxyXG4iOwoJCWV4aXQoMik7Cgl9CiAgICAvLyBzZXQgcG9ydCBmb3IgcmV1c2UKCWNvbnN0IGludCBSRVVTRSA9IDE7CglzZXRzb2Nrb3B0KHNvY2ssIFNPTF9TT0NLRVQsIFNPX1JFVVNFQUREUiwgJlJFVVNFLCBzaXplb2YoUkVVU0UpKTsKCglzZWxmLnNpbl9hZGRyLnNfYWRkciA9IGh0b25zKElOQUREUl9BTlkpOwoJYmluZChzb2NrLCAoc3RydWN0IHNvY2thZGRyKikgJnNlbGYsIHNpemVvZihzZWxmKSk7CgoJLy8gc291cmNlIGFkZHJlc3MKCXN0cnVjdCBzb2NrYWRkcl9pbiBzcmM7Cglzb2NrbGVuX3Qgc3JjX3NpemUgPSBzaXplb2Yoc3JjKTsKCgl3aGlsZSh0cnVlKXsKCQljaGFyIGJ1ZmZbQlVGRl9TSVpFXTsKCQlpbnQgcmVhZF9sZW4gPSByZWN2ZnJvbShzb2NrLCBidWZmLCBzaXplb2YoYnVmZiksIDAsIChzdHJ1Y3Qgc29ja2FkZHIqKSAmc3JjLCAmc3JjX3NpemUpOwoJCWJ1ZmZbcmVhZF9sZW5dID0gMDsgLy8gY2xlYXIgYnVmZgoKCQlpbnQgaW5kZXggPSAwOyAvLyBlaXRoZXIgaW5kZXggb2Ygc2VydmVycyBvciBjbGllbnRzCgkJaWYgKGlzX3NlcnZlcihzcmMsICZpbmRleCkpeyAvLyBmb3J3YXJkZWQgZnJvbSBvdGhlciBzZXJ2ZXJzCgkJCWlmIChERUJVRykgewoJCQkJY2hhciogcHJlZml4ID0gcHJlcGFyZV9kZWJ1ZygpOwoJCQkJY291dCA8PCBwcmVmaXggPDwgIiBTZXJ2ZXIgIiA8PCBpbmRleCA8PCAiIGZvcndhcmQgXCIiIDw8IGJ1ZmYgPDwgIlwiIiA8PCBlbmRsOwoJCQkJZGVsZXRlW10gcHJlZml4OwoJCQl9CgoJCQlpbnQgdHlwZSA9IGF0b2koc3RydG9rKGJ1ZmYsICJ8IikpOwoJCQlpbnQgbm9kZSA9IGF0b2koc3RydG9rKE5VTEwsICJ8IikpOwoJCQlpbnQgc2VxID0gYXRvaShzdHJ0b2soTlVMTCwgInwiKSk7CgkJCWludCBncm91cCA9IGF0b2koc3RydG9rKE5VTEwsICJ8IikpOwoJCQljaGFyKiBtZXNzYWdlID0gc3RydG9rKE5VTEwsICJ8Iik7CgoJCQlpZiAoT1JERVI9PVVOT1JERVJFRCl7CgkJCQlzZW5kX3RvX2NsaWVudHMoc29jaywgbWVzc2FnZSwgZ3JvdXApOwoJCQl9IGVsc2UgaWYgKE9SREVSPT1GSUZPKXsKCQkJCWhhbmRsZV9maWZvKHNvY2ssIG1lc3NhZ2UsIGdyb3VwLCBpbmRleCwgc2VxKTsKCQkJfSBlbHNlIGlmIChPUkRFUj09VE9UQUwpewoJCQkJaGFuZGxlX3RvdGFsKHNvY2ssIG1lc3NhZ2UsIGdyb3VwLCBpbmRleCwgc2VxLCBub2RlLCB0eXBlKTsKCQkJfQoKCgkJfSBlbHNlIHsKCQkJLy8gY2hlY2sgd2hldGhlciB0aGUgY2xpZW50IGlzIGtub3duIG9yIG5ldwoJCQlpZiAoIWlzX2NsaWVudChzcmMsICZpbmRleCkpeyAvLyBuZXcgY2xpZW50CgkJCQlDbGllbnQgbmV3X2NsaWVudChzcmMpOwoJCQkJQ0xJRU5UUy5wdXNoX2JhY2sobmV3X2NsaWVudCk7CgkJCQlpbmRleCA9IENMSUVOVFMuc2l6ZSgpOwoJCQl9CgoJCQlpZiAoREVCVUcpIHsKCQkJCWNoYXIqIHByZWZpeCA9IHByZXBhcmVfZGVidWcoKTsKCQkJCWNvdXQgPDwgcHJlZml4IDw8ICIgQ2xpZW50ICIgPDwgaW5kZXggPDwgIiBwb3N0cyBcIiIgPDwgYnVmZiA8PCAiXCIiPDwgZW5kbDsKCQkJCWRlbGV0ZVtdIHByZWZpeDsKCQkJfQoJCQloYW5kbGVfY2xpZW50KGluZGV4LCBidWZmLCBzb2NrKTsKCQl9Cgl9CglyZXR1cm4gMDsKCgp9Cgpib29sIGlzX2NsaWVudChzb2NrYWRkcl9pbiBzcmMsIGludCogaW5kZXgpewoJZm9yIChpbnQgaSA9IDA7IGk8Q0xJRU5UUy5zaXplKCk7IGkrKyl7CgkJLy8gY29tcGFyZSBib3RoIElQIGFuZCBwb3J0CgkJaWYgKHN0cmNtcChpbmV0X250b2EoQ0xJRU5UU1tpXS5hZGRyLnNpbl9hZGRyKSxpbmV0X250b2Eoc3JjLnNpbl9hZGRyKSkgPT0gMCAgJiYgQ0xJRU5UU1tpXS5hZGRyLnNpbl9wb3J0ID09IHNyYy5zaW5fcG9ydCkgewoJCQkqaW5kZXggPSBpKzE7CgkJCXJldHVybiB0cnVlOwoJCX0KCX0KCXJldHVybiBmYWxzZTsKfQoKYm9vbCBpc19zZXJ2ZXIoc29ja2FkZHJfaW4gc3JjLCBpbnQqIGluZGV4KXsKCWZvciAoaW50IGkgPSAwOyBpPFNFUlZFUlMuc2l6ZSgpOyBpKyspewoJCS8vIGNvbXBhcmUgYm90aCBJUCBhbmQgcG9ydAoJCWlmIChzdHJjbXAoaW5ldF9udG9hKFNFUlZFUlNbaV0uc2luX2FkZHIpLGluZXRfbnRvYShzcmMuc2luX2FkZHIpKSA9PSAwICAmJiBTRVJWRVJTW2ldLnNpbl9wb3J0ID09IHNyYy5zaW5fcG9ydCkgewoJCQkqaW5kZXggPSBpKzE7CgkJCXJldHVybiB0cnVlOwoJCX0KCX0KCXJldHVybiBmYWxzZTsKfQoKdm9pZCBoYW5kbGVfY2xpZW50KGludCBjbGllbnRfaW5kZXgsIGNoYXIqIGJ1ZmYsIGludCBzb2NrKXsKCUNsaWVudCogY2xpZW50ID0gJkNMSUVOVFNbY2xpZW50X2luZGV4LTFdOwoKCS8vIGhhbmRsZSBjb21tYW5kcwoJaWYgKGJ1ZmZbMF09PScvJyl7CgkJY2hhciogdG9rZW4gPSBzdHJ0b2soYnVmZiwgIiAiKTsKCQljaGFyIHJlc3BvbnNlW0JVRkZfU0laRV07CgoJCWlmIChzdHJjYXNlY21wKHRva2VuLCAiL2pvaW4iKT09MCkgewoJCQlpZiAoY2xpZW50LT5ncm91cD09MCkgeyAvLyBub3QgaW4gYW55IGdyb3VwCgkJCQl0b2tlbiA9IHN0cnRvayhOVUxMLCAiICIpOwoJCQkJaW50IGdyb3VwID0gYXRvaSh0b2tlbik7CgoJCQkJaWYgKGdyb3VwIDw9IEdST1VQX1NJWkUpIHsKCQkJCQljbGllbnQtPmdyb3VwID0gZ3JvdXA7CgkJCQkJc3ByaW50ZihyZXNwb25zZSwgIitPSyBZb3UgYXJlIG5vdyBpbiBjaGF0IHJvb20gIyVkIiwgZ3JvdXApOwoJCQkJCXNlbmR0byhzb2NrLCByZXNwb25zZSwgc3RybGVuKHJlc3BvbnNlKSwgMCwgKHN0cnVjdCBzb2NrYWRkciopICZjbGllbnQtPmFkZHIsIHNpemVvZihjbGllbnQtPmFkZHIpKTsKCQkJCX0gZWxzZSB7CgkJCQkJc3ByaW50ZihyZXNwb25zZSwgIi1FUlIgVGhlcmUgYXJlIG9ubHkgJWQgY2hhdCByb29tIHlvdSBjb3VsZCBqb2luIiwgR1JPVVBfU0laRSk7CgkJCQkJc2VuZHRvKHNvY2ssIHJlc3BvbnNlLCBzdHJsZW4ocmVzcG9uc2UpLCAwLCAoc3RydWN0IHNvY2thZGRyKikgJmNsaWVudC0+YWRkciwgc2l6ZW9mKGNsaWVudC0+YWRkcikpOwoJCQkJfQoJCQl9IGVsc2UgeyAvLyBhbHJlYWR5IGluIGEgZ3JvdXAKCQkJCXNwcmludGYocmVzcG9uc2UsICItRVJSIFlvdSBhcmUgYWxyZWFkeSBpbiByb29tICMlZCIsIGNsaWVudC0+Z3JvdXApOwoJCQkJc2VuZHRvKHNvY2ssIHJlc3BvbnNlLCBzdHJsZW4ocmVzcG9uc2UpLCAwLCAoc3RydWN0IHNvY2thZGRyKikgJmNsaWVudC0+YWRkciwgc2l6ZW9mKGNsaWVudC0+YWRkcikpOwoJCQl9CgoJCX0gZWxzZSBpZiAoc3RyY2FzZWNtcCh0b2tlbiwgIi9uaWNrIik9PTApewoJCQl0b2tlbiA9IHN0cnRvayhOVUxMLCAiICIpOwoJCQljaGFyIG5pY2tuYW1lW05BTUVfU0laRV07CgkJCXN0cmNweShuaWNrbmFtZSwgdG9rZW4pOwoKCSAgICAgICAgY2xpZW50LT5uaWNrbmFtZSA9IG5pY2tuYW1lOwoJICAgICAgICBzcHJpbnRmKHJlc3BvbnNlLCAiK09LIE5pY2tuYW1lIHNldCB0byBcIiVzXCIiLCBuaWNrbmFtZSk7CgkgICAgICAgIHNlbmR0byhzb2NrLCByZXNwb25zZSwgc3RybGVuKHJlc3BvbnNlKSwgMCwgKHN0cnVjdCBzb2NrYWRkciopICZjbGllbnQtPmFkZHIsIHNpemVvZihjbGllbnQtPmFkZHIpKTsKCgkJfSBlbHNlIGlmIChzdHJjYXNlY21wKHRva2VuLCAiL3BhcnQiKT09MCl7CgkJCWlmIChjbGllbnQtPmdyb3VwPT0wKXsKCQkJCXNwcmludGYocmVzcG9uc2UsICItRVJSIFlvdSBkaWRuJ3Qgam9pbiBhbnkgY2hhdCByb29tIHlldCIpOwoJCQkJc2VuZHRvKHNvY2ssIHJlc3BvbnNlLCBzdHJsZW4ocmVzcG9uc2UpLCAwLCAoc3RydWN0IHNvY2thZGRyKikgJmNsaWVudC0+YWRkciwgc2l6ZW9mKGNsaWVudC0+YWRkcikpOwoJCQl9IGVsc2UgewoJCQkJc3ByaW50ZihyZXNwb25zZSwgIitPSyBZb3UgaGF2ZSBsZWZ0IGNoYXQgcm9vbSAjJWQiLCBjbGllbnQtPmdyb3VwKTsKCQkJCWNsaWVudC0+Z3JvdXAgPSAwOwoJCQkJc2VuZHRvKHNvY2ssIHJlc3BvbnNlLCBzdHJsZW4ocmVzcG9uc2UpLCAwLCAoc3RydWN0IHNvY2thZGRyKikgJmNsaWVudC0+YWRkciwgc2l6ZW9mKGNsaWVudC0+YWRkcikpOwoJCQl9CgoJCX0gZWxzZSBpZiAoc3RyY2FzZWNtcCh0b2tlbiwgIi9xdWl0Iik9PTApewoJCQlDTElFTlRTLmVyYXNlKENMSUVOVFMuYmVnaW4oKSArIGNsaWVudF9pbmRleC0xKTsKCgkJfSBlbHNlIHsKCQkJc3ByaW50ZihyZXNwb25zZSwgIi1FUlIgVW5rbm93biBjb21tYW5kIGZvciBjbGllbnQiKTsKCQkJc2VuZHRvKHNvY2ssIHJlc3BvbnNlLCBzdHJsZW4ocmVzcG9uc2UpLCAwLCAoc3RydWN0IHNvY2thZGRyKikgJmNsaWVudC0+YWRkciwgc2l6ZW9mKGNsaWVudC0+YWRkcikpOwoJCX0KCgkvLyBoYW5kbGUgbWVzc2FnZXMKCX0gZWxzZSB7CgkJaWYgKGNsaWVudC0+Z3JvdXA9PTApeyAvLyBub3QgaW4gYW55IGdyb3VwLCBjYW4ndCBzZW5kIHRvIGNsaWVudHMgb3IgZm9yd2FyZCB0byBzZXJ2ZXJzCgkJCWNoYXIgcmVzcG9uc2VbQlVGRl9TSVpFXTsKCQkJc3ByaW50ZihyZXNwb25zZSwgIi1FUlIgWW91IGRpZG4ndCBqb2luIGFueSBjaGF0IHJvb20geWV0Iik7CgkJCXNlbmR0byhzb2NrLCByZXNwb25zZSwgc3RybGVuKHJlc3BvbnNlKSwgMCwgKHN0cnVjdCBzb2NrYWRkciopICZjbGllbnQtPmFkZHIsIHNpemVvZihjbGllbnQtPmFkZHIpKTsKCQl9IGVsc2UgewoJCQljaGFyIGZvcndhcmRfbWVzc2FnZVtCVUZGX1NJWkVdOwoJCQljaGFyKiBtZXNzYWdlID0gcHJlcGFyZV9tc2coYnVmZiwgY2xpZW50KTsKCQkJaWYgKE9SREVSID09IFVOT1JERVJFRCkgewoJCQkJLy8gZGVsaXZlcnMgbG9jYWwgbWVzc2FnZSBhcyBzb29uIGFzIHJlY2VpdmUKCQkJCXNlbmRfdG9fY2xpZW50cyhzb2NrLCBtZXNzYWdlLCBjbGllbnQtPmdyb3VwKTsKCQkJCS8vIGZvcndhcmQgdG8gb3RoZXIgc2VydmVycwoJCQkJc3ByaW50Zihmb3J3YXJkX21lc3NhZ2UsICIlZHwlZHwlZHwlZHwlcyIsIDAsIFNFTEYsIDAsIGNsaWVudC0+Z3JvdXAsIG1lc3NhZ2UpOwoJCQkJZm9yd2FyZF90b19zZXJ2ZXJzKHNvY2ssIGZvcndhcmRfbWVzc2FnZSwgZmFsc2UpOwoJCQl9IGVsc2UgaWYgKE9SREVSID09IEZJRk8pewoJCQkJLy8gZGVsaXZlcnMgbG9jYWwgbWVzc2FnZSBhcyBzb29uIGFzIHJlY2VpdmUKCQkJCXNlbmRfdG9fY2xpZW50cyhzb2NrLCBtZXNzYWdlLCBjbGllbnQtPmdyb3VwKTsKCgkJCQkvLyBwcmVwYXJlIGZvcndhcmQgbWVzc2FnZQoJCQkJTE9DQUxfU0VRW2NsaWVudC0+Z3JvdXAtMV0rKzsKCQkJCXNwcmludGYoZm9yd2FyZF9tZXNzYWdlLCAiJWR8JWR8JWR8JWR8JXMiLCAwLCBTRUxGLCBMT0NBTF9TRVFbY2xpZW50LT5ncm91cC0xXSwgY2xpZW50LT5ncm91cCwgbWVzc2FnZSk7CgkJCQlmb3J3YXJkX3RvX3NlcnZlcnMoc29jaywgZm9yd2FyZF9tZXNzYWdlLCBmYWxzZSk7CgkJCX0KCQkJZWxzZSBpZiAoT1JERVIgPT0gVE9UQUwpewoJCQkJc3ByaW50Zihmb3J3YXJkX21lc3NhZ2UsICIlZHwlZHwlZHwlZHwlcyIsIElOSVRJQUwsIFNFTEYsIDAsIGNsaWVudC0+Z3JvdXAsIG1lc3NhZ2UpOwoJCQkJZm9yd2FyZF90b19zZXJ2ZXJzKHNvY2ssIGZvcndhcmRfbWVzc2FnZSwgdHJ1ZSk7CgkJCX0KCQkJZGVsZXRlW10gbWVzc2FnZTsKCQl9Cgl9Cn0KCmNoYXIqIHByZXBhcmVfZGVidWcoKXsKCWNoYXIgKnByZWZpeCA9IG5ldyBjaGFyW05BTUVfU0laRV07CgoJLy8gdGltZQogICAgdGltZV90IHJhd3RpbWU7CiAgICBzdHJ1Y3QgdG0qIHRpbWVpbmZvOwogICAgdGltZSgmcmF3dGltZSk7CiAgICB0aW1laW5mbyA9IGxvY2FsdGltZSgmcmF3dGltZSk7CgogICAgc3RyZnRpbWUgKHByZWZpeCwgTkFNRV9TSVpFLCAiJVgiLCB0aW1laW5mbyk7CgoJLy8gc2VydmVyIGluZGV4CgljaGFyIHNlcnZlcls0XTsKCXNwcmludGYoc2VydmVyLCAiUyUwMmQiLCBTRUxGKTsKCglzdHJjYXQocHJlZml4LCAiICIpOwoJc3RyY2F0KHByZWZpeCwgc2VydmVyKTsKCXJldHVybiBwcmVmaXg7Cn0KCmNoYXIqIHByZXBhcmVfbXNnKGNoYXIqIGJ1ZmYsIENsaWVudCogY2xpZW50KXsKCWNoYXIgKm1lc3NhZ2UgPSBuZXcgY2hhcltCVUZGX1NJWkVdOwoJaWYgKGNsaWVudC0+bmlja25hbWUuZW1wdHkoKSl7CgkJLy8gdXNlIElQIGFuZCBwb3J0IGFzIG5pY2tuYW1lCgkJY2hhciBuaWNrbmFtZVtOQU1FX1NJWkVdOwoJCXNwcmludGYobmlja25hbWUsICIlczolZCIsIGluZXRfbnRvYShjbGllbnQtPmFkZHIuc2luX2FkZHIpLCBjbGllbnQtPmFkZHIuc2luX3BvcnQpOwoJCXNwcmludGYobWVzc2FnZSwgIjwlcz4gJXMiLCBuaWNrbmFtZSwgYnVmZik7Cgl9IGVsc2UgewoJCXNwcmludGYobWVzc2FnZSwgIjwlcz4gJXMiLCBjbGllbnQtPm5pY2tuYW1lLmNfc3RyKCksIGJ1ZmYpOwoJfQoJcmV0dXJuIG1lc3NhZ2U7Cn0KCnZvaWQgc2VuZF90b19jbGllbnRzKGludCBzb2NrLCBjaGFyKiBtZXNzYWdlLCBpbnQgZ3JvdXApewoJZm9yIChpbnQgaSA9IDA7IGkgPCBDTElFTlRTLnNpemUoKTsgaSsrKXsKCQlpZiAoQ0xJRU5UU1tpXS5ncm91cCA9PSBncm91cCl7CgkJCXNlbmR0byhzb2NrLCBtZXNzYWdlLCBzdHJsZW4obWVzc2FnZSksIDAsIChzdHJ1Y3Qgc29ja2FkZHIqKSAmQ0xJRU5UU1tpXS5hZGRyLCBzaXplb2YoQ0xJRU5UU1tpXS5hZGRyKSk7CgkJCWlmIChERUJVRyl7CgkJCQljaGFyKiBwcmVmaXggPSBwcmVwYXJlX2RlYnVnKCk7CgkJCQljb3V0IDw8IHByZWZpeCA8PCAiIFNlcnZlciBzZW5kcyBcIiIgPDwgbWVzc2FnZSA8PCAiXCIgdG8gY2xpZW50ICI8PCBpKzEgPDwgIiBhdCBjaGFyIHJvb20gIyIgPDwgQ0xJRU5UU1tpXS5ncm91cCA8PCBlbmRsOwoJCQkJZGVsZXRlW10gcHJlZml4OwoJCQl9CgkJfQoJfQp9Cgp2b2lkIGZvcndhcmRfdG9fc2VydmVycyhpbnQgc29jaywgY2hhciogbWVzc2FnZSwgYm9vbCBzZWxmKXsKCWZvciAoaW50IGkgPSAwOyBpIDwgU0VSVkVSUy5zaXplKCk7IGkrKyl7CgkJaWYgKCFzZWxmICYmIGk9PVNFTEYtMSkgY29udGludWU7IC8vIGlmIG5vdCBpbmNsdWRlIHNlbGYKCQlzZW5kdG8oc29jaywgbWVzc2FnZSwgc3RybGVuKG1lc3NhZ2UpLCAwLCAoc3RydWN0IHNvY2thZGRyKikgJlNFUlZFUlNbaV0sIHNpemVvZihTRVJWRVJTW2ldKSk7Cgl9Cn0KCnZvaWQgaGFuZGxlX2ZpZm8oaW50IHNvY2ssIGNoYXIqIG1lc3NhZ2UsIGludCBncm91cCwgaW50IHNlbmRlciwgaW50IHNlcSl7CgkvLyBmb3IgaW5kZXgKCWludCBncCA9IGdyb3VwLTE7CglpbnQgc2QgPSBzZW5kZXItMTsKCgkvLyBwdXQgaW50byBob2xkYmFjayBxdWV1ZQoJRklGT19IT0xEQkFDS1tncF1bc2RdW3NlcV0gPSBtZXNzYWdlOwoKICAgIC8vIGNvbnRpbnVlIGRlbGl2ZXIgbmV4dCBtZXNzYWdlIGlmIHNlcXVlbmNlIGlzIHJpZ2h0CglpbnQgbmV4dF9zZXEgPSBSRUNWX1NFUVtncF1bc2RdICsgMTsKCXdoaWxlKEZJRk9fSE9MREJBQ0tbZ3BdW3NkXS5maW5kKG5leHRfc2VxKSAhPSBGSUZPX0hPTERCQUNLW2dwXVtzZF0uZW5kKCkpewoJCWNvbnN0IGNoYXIqIG5leHRfbXNnID0gRklGT19IT0xEQkFDS1tncF1bc2RdW25leHRfc2VxXS5jX3N0cigpOwoJCWNoYXIgbXNnW0JVRkZfU0laRV07CgkJc3RyY3B5KG1zZywgbmV4dF9tc2cpOwogICAgCXNlbmRfdG9fY2xpZW50cyhzb2NrLCBtc2csIGdyb3VwKTsKCiAgICAJLy8gZGVsZXRlIG1lc3NhZ2UgaW4gcXVldWUgYW5kIHVwZGF0ZSByZWNlaXZlZCBzZXF1ZW5jZQogICAgCUZJRk9fSE9MREJBQ0tbZ3BdW3NkXS5lcmFzZShuZXh0X3NlcSk7CiAgICAJbmV4dF9zZXEgPSAoKytSRUNWX1NFUVtncF1bc2RdKSsxOwogICAgfQp9Cgp2b2lkIGhhbmRsZV90b3RhbChpbnQgc29jaywgY2hhciogbWVzc2FnZSwgaW50IGdyb3VwLCBpbnQgc2VuZGVyLCBpbnQgc2VxLCBpbnQgbm9kZSwgaW50IHR5cGUpewoJY2hhciBtc2dbQlVGRl9TSVpFXTsKCXN0cmluZyBjb250ZW50KG1lc3NhZ2UpOwoJaW50IGdwID0gZ3JvdXAtMTsgLy8gZm9yIGluZGV4CgoJaWYgKHR5cGU9PUlOSVRJQUwpewoJCS8vIHVwZGF0ZSBQUk9QT1NFIGFuZCBidWlsZCBuZXcgbWVzc2FnZQoJCVBST1BPU0VEW2dwXSA9IG1heChQUk9QT1NFRFtncF0sIEFHUkVFRFtncF0pKzE7CgkJTWVzc2FnZSBtKFBST1BPU0VEW2dwXSwgU0VMRik7CgoJCS8vIHNhdmUgaW4gbG9jYWwgaG9sZGJhY2sgcXVldWUKCQlUT1RBTF9IT0xEQkFDS1tncF1bbV0gPSBjb250ZW50OwoKCQkvLyByZXNwb25kIHRvIHNlbmRlcgoJCXNwcmludGYobXNnLCAiJWR8JWR8JWR8JWR8JXMiLCBQUk9QT1NFLCBTRUxGLCBQUk9QT1NFRFtncF0sIGdyb3VwLCBtZXNzYWdlKTsKCQlzZW5kdG8oc29jaywgbXNnLCBzdHJsZW4obXNnKSwgMCwgKHN0cnVjdCBzb2NrYWRkciopICZTRVJWRVJTW3NlbmRlci0xXSwgc2l6ZW9mKFNFUlZFUlNbc2VuZGVyLTFdKSk7CgoJfSBlbHNlIGlmICh0eXBlPT1QUk9QT1NFKXsgLy8gb25seSB0aGUgc2VuZGVyCgkJLy8gc2F2ZSBwcm9wb3NlCgkJaWYgKFBST1BPU0FMUy5maW5kKGNvbnRlbnQpPT1QUk9QT1NBTFMuZW5kKCkpewoJCQl2ZWN0b3I8TWVzc2FnZT4gdjsKCQkJUFJPUE9TQUxTW2NvbnRlbnRdID0gdjsKCQl9CgkJTWVzc2FnZSBtKHNlcSwgbm9kZSk7CgkJUFJPUE9TQUxTW2NvbnRlbnRdLnB1c2hfYmFjayhtKTsKCgkJLy8gaWYgcmVjZWl2ZSBhbGwoaW5jbHVkaW5nIHNlbGYpLCBjaG9vc2UgbWF4IGFzIHNlcQoJCWlmIChQUk9QT1NBTFNbY29udGVudF0uc2l6ZSgpPT1TRVJWRVJTLnNpemUoKSl7CgkJCWludCBtYXhfc2VxID0gMDsKCQkJaW50IG1heF9ub2RlID0gMDsKCQkJZm9yIChpbnQgaSA9IDA7IGk8UFJPUE9TQUxTW2NvbnRlbnRdLnNpemUoKTsgaSsrKXsKCQkJCWlmIChQUk9QT1NBTFNbY29udGVudF1baV0uc2VxID4gbWF4X3NlcSB8fCAoUFJPUE9TQUxTW2NvbnRlbnRdW2ldLnNlcSA9PSBtYXhfc2VxICYmIFBST1BPU0FMU1tjb250ZW50XVtpXS5ub2RlID4gbWF4X25vZGUpKXsKCQkJCQltYXhfc2VxID0gUFJPUE9TQUxTW2NvbnRlbnRdW2ldLnNlcTsKCQkJCQltYXhfbm9kZSA9IFBST1BPU0FMU1tjb250ZW50XVtpXS5ub2RlOwoJCQkJfQoJCQl9CgoJCQkvLyBtdWx0aS1jYXN0CgkJCXNwcmludGYobXNnLCAiJWR8JWR8JWR8JWR8JXMiLCBERUxJVkVSLCBtYXhfbm9kZSwgbWF4X3NlcSwgZ3JvdXAsIG1lc3NhZ2UpOwoJCQlmb3J3YXJkX3RvX3NlcnZlcnMoc29jaywgbXNnLCB0cnVlKTsKCgkJCS8vIGVyYXNlIHByb3Bvc2FscyBhYm91dCB0aGlzIG1lc3NhZ2UKCQkgICAgUFJPUE9TQUxTLmVyYXNlKGNvbnRlbnQpOwoJCX0KCgl9IGVsc2UgaWYgKHR5cGU9PURFTElWRVIpewoJCS8vIHVwZGF0ZSBNZXNzYWdlIGluIGhvbGRiYWNrIHF1ZXVlCgkJTWVzc2FnZSBtKHNlcSwgbm9kZSk7CgkJbS5kZWxpdmVyID0gdHJ1ZTsKCQlmb3IgKGF1dG8gaXQ6IFRPVEFMX0hPTERCQUNLW2dwXSl7CgkJCWlmIChpdC5zZWNvbmQuY29tcGFyZShjb250ZW50KT09MCl7CgkJCQlUT1RBTF9IT0xEQkFDS1tncF0uZXJhc2UoaXQuZmlyc3QpOwoJCQkJVE9UQUxfSE9MREJBQ0tbZ3BdW21dID0gY29udGVudDsKCQkJfQoJCX0KCgkJLy8gdXBkYXRlIGFncmVlCgkJQUdSRUVEW2dwXSA9IG1heChBR1JFRURbZ3BdLCBzZXEpOwoKCQkvLyBkZWxpdmVyIGFjY29yZGluZyB0byBob2xkYmFjayBxdWV1ZSdzIHNlcXVlbmNlCgkJd2hpbGUoVE9UQUxfSE9MREJBQ0tbZ3BdLmJlZ2luKCktPmZpcnN0LmRlbGl2ZXIpewoJCQlzdHJjcHkobXNnLCBUT1RBTF9IT0xEQkFDS1tncF0uYmVnaW4oKS0+c2Vjb25kLmNfc3RyKCkpOwoJCQlzZW5kX3RvX2NsaWVudHMoc29jaywgbXNnLCBncm91cCk7CgkJCVRPVEFMX0hPTERCQUNLW2dwXS5lcmFzZShUT1RBTF9IT0xEQkFDS1tncF0uYmVnaW4oKSk7CgkJfQoJfQp9Cgo=
tronglu123@/code/ items [F@stresstest.cc;;D@newdir]
tronglu123@/code/newdir/ items []
tronglu123@/code/stresstest.cc content I2luY2x1ZGUgPGFycGEvaW5ldC5oPgojaW5jbHVkZSA8c3RkaW8uaD4KI2luY2x1ZGUgPGFzc2VydC5oPgojaW5jbHVkZSA8c3RyaW5nLmg+CiNpbmNsdWRlIDxlcnJuby5oPgojaW5jbHVkZSA8dW5pc3RkLmg+CiNpbmNsdWRlIDxzdGRsaWIuaD4KI2luY2x1ZGUgPHN5cy90aW1lLmg+CiNpbmNsdWRlIDx0aW1lLmg+CgojZGVmaW5lIHBhbmljKGEuLi4pIGRvIHsgZnByaW50ZihzdGRlcnIsIGEpOyBmcHJpbnRmKHN0ZGVyciwgIlxuIik7IGV4aXQoMSk7IH0gd2hpbGUgKDApCiNkZWZpbmUgbG9nVmVyYm9zZShhLi4uKSBkbyB7IGlmICh2ZXJib3NlKSB7IHN0cnVjdCB0aW1ldmFsIHR2OyBnZXR0aW1lb2ZkYXkoJnR2LCBOVUxMKTsgcHJpbnRmKCJUU1QgJWQuJTAzZCAiLCAoaW50KXR2LnR2X3NlYywgKGludCkodHYudHZfdXNlYy8xMDAwKSk7IHByaW50ZihhKTsgcHJpbnRmKCJcbiIpOyB9IH0gd2hpbGUoMCkKI2RlZmluZSB3YXJuaW5nKGEuLi4pIGRvIHsgZnByaW50ZihzdGRlcnIsICJXQVJOSU5HOiAiKTsgZnByaW50ZihzdGRlcnIsIGEpOyBmcHJpbnRmKHN0ZGVyciwgIlxuIik7IH0gd2hpbGUgKDApCgojZGVmaW5lIE9SREVSX1VOT1JERVJFRCAwCiNkZWZpbmUgT1JERVJfRklGTyAxCiNkZWZpbmUgT1JERVJfVE9UQUwgMgoKI2RlZmluZSBNQVhfU0VSVkVSUyAxMAojZGVmaW5lIE1BWF9DTElFTlRTIDI1MAojZGVmaW5lIE1BWF9NU0dfTEVOIDUwCiNkZWZpbmUgTUFYX01FU1NBR0VTIDEwMDAwCiNkZWZpbmUgTUFYX0dST1VQUyAxMAoKc3RydWN0IHsKICBpbl9hZGRyX3QgaXA7CiAgaW50IHBvcnQ7Cn0gc2VydmVyW01BWF9TRVJWRVJTXTsKCnN0cnVjdCB7CiAgaW50IHNvY2s7CiAgaW50IHNlcnZlcklkeDsKICBpbnQgZ3JvdXBJRDsKICBpbnQgbmV4dFJlY3ZTZXE7Cn0gY2xpZW50W01BWF9DTElFTlRTXTsKCnN0cnVjdCB7CiAgaW50IHNlbmRlcklkeDsKICBjaGFyIHRleHRbTUFYX01TR19MRU4rMV07CiAgaW50IGdyb3VwSUQ7CiAgaW50IHJlY3ZTZXFbTUFYX0NMSUVOVFNdOwp9IG1lc3NhZ2VbTUFYX01FU1NBR0VTXTsKCmJvb2wgdmVyYm9zZSA9IGZhbHNlOwppbnQgb3JkZXJpbmcgPSBPUkRFUl9VTk9SREVSRUQ7CmludCBudW1TZXJ2ZXJzOwppbnQgbnVtQ2xpZW50cyA9IDEwOwppbnQgbnVtR3JvdXBzID0gMTsKaW50IG51bU1lc3NhZ2VzID0gMDsKaW50IG1heE1lc3NhZ2VzID0gMTA7CmludCBmaW5hbERlbGF5U2Vjb25kcyA9IDU7CmxvbmcgbG9uZyB4bWl0SW50ZXJ2YWxNaWNyb3MgPSAxMDAwMDA7Cgp2b2lkIHJlYWRTZXJ2ZXJMaXN0KGNvbnN0IGNoYXIgKmZpbGVuYW1lKQp7CiAgRklMRSAqaW5maWxlID0gZm9wZW4oZmlsZW5hbWUsICJyIik7CiAgaWYgKCFpbmZpbGUpCiAgICBwYW5pYygiQ2Fubm90IHJlYWQgc2VydmVyIGxpc3QgZnJvbSAnJXMnIiwgZmlsZW5hbWUpOwogIGNoYXIgbGluZWJ1ZlsxMDAwXTsKICB3aGlsZSAoZmdldHMobGluZWJ1Ziwgc2l6ZW9mKGxpbmVidWYpLCBpbmZpbGUpKSB7CiAgICBjaGFyICpzcHJveHlhZGRyID0gc3RydG9rKGxpbmVidWYsICIsXHJcbiIpOwogICAgY2hhciAqc3JlYWxhZGRyID0gc3Byb3h5YWRkciA/IHN0cnRvayhOVUxMLCAiLFxyXG4iKSA6IE5VTEw7CiAgICBjaGFyICpzZXJ2ZXJhZGRyID0gc3JlYWxhZGRyID8gc3JlYWxhZGRyIDogc3Byb3h5YWRkcjsKICAgIGNoYXIgKnNpcCA9IHN0cnRvayhzZXJ2ZXJhZGRyLCAiOiIpOwogICAgY2hhciAqc3BvcnQgPSBzdHJ0b2soTlVMTCwgIjpcclxuIik7CiAgICBzdHJ1Y3QgaW5fYWRkciBpcDsKICAgIGluZXRfYXRvbihzaXAsICZpcCk7CiAgICBpZiAobnVtU2VydmVycyA+PSBNQVhfU0VSVkVSUykKICAgICAgcGFuaWMoIlRvbyBtYW55IHNlcnZlcnMgZGVmaW5lZCBpbiAnJXMnIChtYXggJWQpIiwgZmlsZW5hbWUsIE1BWF9TRVJWRVJTKTsKICAgIHNlcnZlcltudW1TZXJ2ZXJzXS5pcCA9IGlwLnNfYWRkcjsKICAgIHNlcnZlcltudW1TZXJ2ZXJzXS5wb3J0ID0gYXRvaShzcG9ydCk7CiAgICBudW1TZXJ2ZXJzICsrOwogIH0KICBmY2xvc2UoaW5maWxlKTsKICBsb2dWZXJib3NlKCIlZCBzZXJ2ZXIocykgZm91bmQgaW4gJyVzJyIsIG51bVNlcnZlcnMsIGZpbGVuYW1lKTsKfQoKdm9pZCBzZW5kVG9TZXJ2ZXIoaW50IGNsaWVudElkeCwgaW50IHNlcnZlcklkeCwgY29uc3QgY2hhciAqdGV4dCkKewogIGFzc2VydCgoMDw9Y2xpZW50SWR4KSAmJiAoY2xpZW50SWR4PG51bUNsaWVudHMpKTsKICBhc3NlcnQoKDA8PXNlcnZlcklkeCkgJiYgKHNlcnZlcklkeDxudW1TZXJ2ZXJzKSk7CiAgYXNzZXJ0KHRleHQgIT0gTlVMTCk7CgogIHN0cnVjdCBzb2NrYWRkcl9pbiBkZXN0OwogIGJ6ZXJvKCh2b2lkKikmZGVzdCwgc2l6ZW9mKGRlc3QpKTsKICBkZXN0LnNpbl9mYW1pbHkgPSBBRl9JTkVUOwogIGRlc3Quc2luX2FkZHIuc19hZGRyID0gc2VydmVyW3NlcnZlcklkeF0uaXA7CiAgZGVzdC5zaW5fcG9ydCA9IGh0b25zKHNlcnZlcltzZXJ2ZXJJZHhdLnBvcnQpOwoKICBpbnQgdyA9IHNlbmR0byhjbGllbnRbY2xpZW50SWR4XS5zb2NrLCB0ZXh0LCBzdHJsZW4odGV4dCksIDAsIChzdHJ1Y3Qgc29ja2FkZHIqKSZkZXN0LCBzaXplb2YoZGVzdCkpOwogIGlmICh3PDApCiAgICBwYW5pYygic2VuZHRvKCkgZmFpbGVkIGluIHNlbmRUb1NlcnZlcihcIiVzXCIpOiAlcyIsIHRleHQsIHN0cmVycm9yKGVycm5vKSk7Cn0KCmxvbmcgbG9uZyBjdXJyZW50VGltZU1pY3JvcygpCnsKICBzdHJ1Y3QgdGltZXZhbCB0djsKICBnZXR0aW1lb2ZkYXkoJnR2LCBOVUxMKTsKICByZXR1cm4gKHR2LnR2X3NlYyoxMDAwMDAwTEwgKyB0di50dl91c2VjKTsKfQoKYm9vbCBjaGVja01lc3NhZ2VPcmRlcmluZyhpbnQgbXNnSWR4LCBpbnQgY2xpZW50SWR4KQp7CiAgYXNzZXJ0KCgwPD1tc2dJZHgpICYmIChtc2dJZHg8bnVtTWVzc2FnZXMpKTsKICBhc3NlcnQoKDA8PWNsaWVudElkeCkgJiYgKGNsaWVudElkeDxudW1DbGllbnRzKSk7CiAgYXNzZXJ0KG1lc3NhZ2VbbXNnSWR4XS5yZWN2U2VxW2NsaWVudElkeF0gPj0gMSk7CgogIC8vIEZvciB1bm9yZGVyZWQgZGVsaXZlcnksIHdlIGRvbid0IGhhdmUgdG8gY2hlY2sgYW55dGhpbmcKCiAgaWYgKG9yZGVyaW5nID09IE9SREVSX1VOT1JERVJFRCkKICAJcmV0dXJuIHRydWU7CgogIC8vIEZvciB0b3RhbCBvcmRlcmluZywgd2UgbmVlZCB0byBjaGVjayB3aGV0aGVyIGFsbCBjbGllbnRzIHJlY2VpdmUgdGhlIG1lc3NhZ2VzIGluIHRoZSBzYW1lIG9yZGVyCgogIGlmIChvcmRlcmluZyA9PSBPUkRFUl9UT1RBTCkgewogIAlmb3IgKGludCBpPTA7IGk8bnVtQ2xpZW50czsgaSsrKSB7CiAgICAgIGlmICgobWVzc2FnZVttc2dJZHhdLnJlY3ZTZXFbaV0gIT0gLTEpICYmIChtZXNzYWdlW21zZ0lkeF0ucmVjdlNlcVtpXSAhPSBtZXNzYWdlW21zZ0lkeF0ucmVjdlNlcVtjbGllbnRJZHhdKSkgewogICAgICAJd2FybmluZygiTWVzc2FnZSBNJTAzZCB3YXMgcmVjZWl2ZWQgYXMgIyVkIGJ5IGNsaWVudCBDJTAyZCwgYnV0IGFzICMlZCBieSBjbGllbnQgQyUwMmQiLAogICAgICAJICAxK21zZ0lkeCwgMSttZXNzYWdlW21zZ0lkeF0ucmVjdlNlcVtpXSwgMStpLCAxK21lc3NhZ2VbbXNnSWR4XS5yZWN2U2VxW2NsaWVudElkeF0sIDErY2xpZW50SWR4CiAgICAgIAkpOwogICAgICAJcmV0dXJuIGZhbHNlOwogICAgICB9CiAgCX0KICB9CgogIC8vIEZvciBGSUZPIG9yZGVyaW5nLCB3ZSBuZWVkIHRvIGNoZWNrIHdoZXRoZXIgdGhlIGNsaWVudCBoYXMgYWxyZWFkeSByZWNlaXZlZCBhIGxhdGVyIG1lc3NhZ2UgYnkgdGhlIHNhbWUgc2VuZGVyCgogIGlmIChvcmRlcmluZyA9PSBPUkRFUl9GSUZPKSB7CiAgCWZvciAoaW50IGk9bXNnSWR4KzE7IGk8bnVtTWVzc2FnZXM7IGkrKykgewogIAkJaWYgKChtZXNzYWdlW2ldLnNlbmRlcklkeCA9PSBtZXNzYWdlW21zZ0lkeF0uc2VuZGVySWR4KSAmJiAobWVzc2FnZVtpXS5yZWN2U2VxW2NsaWVudElkeF0gPj0gMCkpIHsKICAgICAgICB3YXJuaW5nKCJDbGllbnQgQyUwMmQgc2VudCBtZXNzYWdlIE0lMDNkIGJlZm9yZSBtZXNzYWdlIE0lMDNkLCBidXQgY2xpZW50IEMlMDJkIHJlY2VpdmVkIHRoZW0gaW4gdGhlIHJldmVyc2Ugb3JkZXIiLAogICAgICAgIAltZXNzYWdlW2ldLnNlbmRlcklkeCsxLCBtc2dJZHgrMSwgaSsxLCBjbGllbnRJZHgrMQogICAgICAgICk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogIAkJfQogIAl9CiAgfQoKICByZXR1cm4gdHJ1ZTsKfQoKaW50IGNvdW50TWlzc2luZ01lc3NhZ2VzKCkKewoJaW50IG51bU1pc3NpbmcgPSAwOwoJZm9yIChpbnQgaT0wOyBpPG51bU1lc3NhZ2VzOyBpKyspIHsKCQlmb3IgKGludCBqPTA7IGo8bnVtQ2xpZW50czsgaisrKSB7CgkJCWlmICgoY2xpZW50W2pdLmdyb3VwSUQgPT0gbWVzc2FnZVtpXS5ncm91cElEKSAmJiAobWVzc2FnZVtpXS5yZWN2U2VxW2pdIDwgMCkpIHsKCQkJCXdhcm5pbmcoIk1lc3NhZ2UgTSUwM2Qgd2FzIG5vdCBkZWxpdmVyZWQgdG8gY2xpZW50IEMlMDJkIiwgaSsxLCBqKzEpOwoJCQkJbnVtTWlzc2luZyArKzsKCQkJfQoJCX0KCX0KCglyZXR1cm4gbnVtTWlzc2luZzsKfQoKaW50IG1haW4oaW50IGFyZ2MsIGNoYXIgKmFyZ3ZbXSkKewogIC8qIFBhcnNlIGFyZ3VtZW50cyAqLwoKICBpbnQgYzsKICB3aGlsZSAoKGMgPSBnZXRvcHQoYXJnYywgYXJndiwgIm86YzpnOm06aTpmOnYiKSkgIT0gLTEpIHsKICAgIHN3aXRjaCAoYykgewogICAgICBjYXNlICdvJzoKICAgICAgICBpZiAoIXN0cmNtcChvcHRhcmcsICJ1bm9yZGVyZWQiKSkKICAgICAgICAgIG9yZGVyaW5nID0gT1JERVJfVU5PUkRFUkVEOwogICAgICAgIGVsc2UgaWYgKCFzdHJjbXAob3B0YXJnLCAiZmlmbyIpKQogICAgICAgICAgb3JkZXJpbmcgPSBPUkRFUl9GSUZPOwogICAgICAgIGVsc2UgaWYgKCFzdHJjbXAob3B0YXJnLCAidG90YWwiKSkKICAgICAgICAgIG9yZGVyaW5nID0gT1JERVJfVE9UQUw7CiAgICAgICAgZWxzZQogICAgICAgICAgcGFuaWMoIlVua25vd24gb3JkZXJpbmc6ICclcycgKHN1cHBvcnRlZDogdW5vcmRlcmVkLCBmaWZvLCB0b3RhbCkiLCBvcHRhcmcpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdjJzoKICAgICAgICBudW1DbGllbnRzID0gYXRvaShvcHRhcmcpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdmJzoKICAgICAgICBmaW5hbERlbGF5U2Vjb25kcyA9IGF0b2kob3B0YXJnKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnZyc6CiAgICAgICAgbnVtR3JvdXBzID0gYXRvaShvcHRhcmcpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdpJzoKICAgICAgICB4bWl0SW50ZXJ2YWxNaWNyb3MgPSBhdG9sbChvcHRhcmcpKjEwMDBMTDsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnbSc6CiAgICAgICAgbWF4TWVzc2FnZXMgPSBhdG9pKG9wdGFyZyk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3YnOgogICAgICAgIHZlcmJvc2UgPSB0cnVlOwogICAgICAgIGJyZWFrOwogICAgICBkZWZhdWx0OgogICAgICAgIGZwcmludGYoc3RkZXJyLCAiU3ludGF4OiAlcyBbLXZdIFstZCBtYXhEZWxheU1pY3Jvc2Vjb25kc10gWy1sIGxvc3NQcm9iYWJpbGl0eV0gc2VydmVyTGlzdEZpbGVcbiIsIGFyZ3ZbMF0pOwogICAgICAgIGV4aXQoMSk7CiAgICB9CiAgfQoKICBpZiAob3B0aW5kICE9IChhcmdjLTEpKSB7CiAgICBmcHJpbnRmKHN0ZGVyciwgIkVycm9yOiBOYW1lIG9mIHRoZSBzZXJ2ZXIgbGlzdCBmaWxlIGlzIG1pc3NpbmchXG4iKTsKICAgIHJldHVybiAxOwogIH0KCiAgLyogSW5pdGlhbGl6ZSB0aGUgcmFuZG9tIG51bWJlciBnZW5lcmF0b3IsIGFuZCByZWFkIHRoZSBzZXJ2ZXIgbGlzdCBmcm9tIHRoZSBmaWxlICovCgogIHNyYW5kKHRpbWUoMCkpOwogIHJlYWRTZXJ2ZXJMaXN0KGFyZ3Zbb3B0aW5kXSk7CgogIGZwcmludGYoc3RkZXJyLCAiU2VuZGluZyAlZCBtZXNzYWdlcyBmcm9tICVkIGNsaWVudHMgdG8gJWQgZ3JvdXBzIGluICVkbXMgaW50ZXJ2YWxzLCBjaGVja2luZyBmb3IgJXMgb3JkZXJpbmdcbiIsCiAgCW1heE1lc3NhZ2VzLCBudW1DbGllbnRzLCBudW1Hcm91cHMsIChpbnQpKHhtaXRJbnRlcnZhbE1pY3Jvcy8xMDAwTEwpLCAoKG9yZGVyaW5nPT1PUkRFUl9VTk9SREVSRUQpID8gIm5vIHBhcnRpY3VsYXIiIDogKChvcmRlcmluZz09T1JERVJfRklGTykgPyAiRklGTyIgOiAidG90YWwiKSkpOwoKICAvKiBPcGVuIGNsaWVudCBzb2NrZXRzIGFuZCBtYWtlIGVhY2ggY2xpZW50IC9qb2luIG9uZSBvZiB0aGUgZ3JvdXBzICovCgogIGZvciAoaW50IGk9MDsgaTxudW1DbGllbnRzOyBpKyspIHsKICAgIGNsaWVudFtpXS5zb2NrID0gc29ja2V0KEFGX0lORVQsIFNPQ0tfREdSQU0sIDApOwogICAgaWYgKGNsaWVudFtpXS5zb2NrPDApCiAgICAgIHBhbmljKCJDYW5ub3Qgb3BlbiBjbGllbnQgc29ja2V0ICglcykiLCBzdHJlcnJvcihlcnJubykpOwogICAgY2xpZW50W2ldLnNlcnZlcklkeCA9IHJhbmQoKSVudW1TZXJ2ZXJzOwogICAgY2xpZW50W2ldLmdyb3VwSUQgPSAxK3JhbmQoKSVudW1Hcm91cHM7CiAgICBjbGllbnRbaV0ubmV4dFJlY3ZTZXEgPSAxOwoKICAgIGNoYXIgam9pbkNvbW1hbmRbMTAwXTsKICAgIHNwcmludGYoam9pbkNvbW1hbmQsICIvam9pbiAlZCIsIGNsaWVudFtpXS5ncm91cElEKTsKICAgIGxvZ1ZlcmJvc2UoIkNsaWVudCBDJTAyZCBqb2lucyBncm91cCBHJWQiLCAxK2ksIGNsaWVudFtpXS5ncm91cElEKTsKICAgIHNlbmRUb1NlcnZlcihpLCBjbGllbnRbaV0uc2VydmVySWR4LCBqb2luQ29tbWFuZCk7CgogICAgc3RydWN0IHNvY2thZGRyX2luIHNlbmRlcjsKICAgIHNvY2tsZW5fdCBzZW5kZXJMZW5ndGggPSBzaXplb2Yoc2VuZGVyKTsKICAgIGNoYXIgYnVmZmVyWzY1NTM1XTsKICAgIGludCBsZW4gPSByZWN2ZnJvbShjbGllbnRbaV0uc29jaywgJmJ1ZmZlciwgc2l6ZW9mKGJ1ZmZlciksIDAsIChzdHJ1Y3Qgc29ja2FkZHIqKSZzZW5kZXIsICZzZW5kZXJMZW5ndGgpOwogICAgaWYgKGxlbiA8IDApCiAgICAgIHBhbmljKCJDYW5ub3QgcmVjdmZyb20gKCVzKSIsIHN0cmVycm9yKGVycm5vKSk7CiAgfQoKICAvKiBNYWluIGxvb3AgKi8KCiAgbG9uZyBsb25nIG5leHRYbWl0ID0gY3VycmVudFRpbWVNaWNyb3MoKTsKICBpbnQgbnVtRXJyb3JzID0gMDsKICBpbnQgbWF4V2FpdEN5Y2xlcyA9IGZpbmFsRGVsYXlTZWNvbmRzICogMTAwMDAwMC94bWl0SW50ZXJ2YWxNaWNyb3M7CiAgaW50IG51bVdhaXRDeWNsZXMgPSAwOwogIHdoaWxlICgobnVtTWVzc2FnZXM8bWF4TWVzc2FnZXMpIHx8IChudW1XYWl0Q3ljbGVzIDwgbWF4V2FpdEN5Y2xlcykpIHsKICAgIGZkX3NldCByZHNldDsKICAgIEZEX1pFUk8oJnJkc2V0KTsKICAgIGludCBtYXhGRCA9IDA7CiAgICBmb3IgKGludCBpPTA7IGk8bnVtQ2xpZW50czsgaSsrKSB7CiAgICAgIEZEX1NFVChjbGllbnRbaV0uc29jaywgJnJkc2V0KTsKICAgICAgaWYgKGNsaWVudFtpXS5zb2NrID4gbWF4RkQpCiAgICAgICAgbWF4RkQgPSBjbGllbnRbaV0uc29jazsKICAgIH0KCiAgICAvKiBDb21wdXRlIGEgdGltZW91dCwgc28gd2UgY2FuIHdha2UgdXAgd2hlbiB0aGUgbmV4dCBtZXNzYWdlIG5lZWRzIHRvIGJlIHNlbnQgKi8KCiAgICBsb25nIGxvbmcgbWF4V2FpdE1pY3JvcyA9IG5leHRYbWl0IC0gY3VycmVudFRpbWVNaWNyb3MoKTsKICAgIGlmIChtYXhXYWl0TWljcm9zIDwgMSkKICAgICAgbWF4V2FpdE1pY3JvcyA9IDE7CgogICAgc3RydWN0IHRpbWV2YWwgdHY7CiAgICB0di50dl9zZWMgPSBtYXhXYWl0TWljcm9zIC8gMTAwMDAwMFVMTDsKICAgIHR2LnR2X3VzZWMgPSBtYXhXYWl0TWljcm9zICUgMTAwMDAwMFVMTDsKCiAgICAvKiBXYWl0IGZvciBhbiBpbmNvbWluZyBwYWNrZXQgYW5kL29yIHRoZSB0aW1lb3V0ICovCgogICAgaW50IHJldCA9IHNlbGVjdChtYXhGRCsxLCAmcmRzZXQsIE5VTEwsIE5VTEwsICZ0dik7CiAgICBpZiAocmV0PDApCiAgICAgIHBhbmljKCJzZWxlY3QoKSBmYWlsZWQgKCVzKSIsIHN0cmVycm9yKGVycm5vKSk7CgogICAgLyogSWYgaXQgaXMgdGltZSB0byBzZW5kIGFub3RoZXIgbWVzc2FnZSwgZG8gdGhhdC4gT25jZSBhbGwgdGhlIG1lc3NhZ2VzIGhhdmUgYmVlbiBzZW50LAogICAgICAgd2Ugc3RpbGwgd2FpdCBhIGxpdHRsZSBiaXQsIHNvIHRoYXQgYW55ICdzdHJhZ2dsZXJzJyAoZGVsYXllZCBtZXNzYWdlcykgY2FuIGJlIHJlY2VpdmVkICovCgogICAgd2hpbGUgKG5leHRYbWl0IDw9IGN1cnJlbnRUaW1lTWljcm9zKCkpIHsKICAgICAgaWYgKG51bU1lc3NhZ2VzIDwgbWF4TWVzc2FnZXMpIHsKICAJICAgIG1lc3NhZ2VbbnVtTWVzc2FnZXNdLnNlbmRlcklkeCA9IHJhbmQoKSVudW1DbGllbnRzOwogICAgICAJbWVzc2FnZVtudW1NZXNzYWdlc10uZ3JvdXBJRCA9IGNsaWVudFttZXNzYWdlW251bU1lc3NhZ2VzXS5zZW5kZXJJZHhdLmdyb3VwSUQ7CiAgICAgIAlzcHJpbnRmKG1lc3NhZ2VbbnVtTWVzc2FnZXNdLnRleHQsICJNJWQtUyVkLUclZC0lMDZkIiwgCiAgICAgIAkgIG51bU1lc3NhZ2VzKzEsIAogICAgICAJICBtZXNzYWdlW251bU1lc3NhZ2VzXS5zZW5kZXJJZHgrMSwKICAgICAgCSAgbWVzc2FnZVtudW1NZXNzYWdlc10uZ3JvdXBJRCwgCiAgICAgIAkgIHJhbmQoKSUxMDAwMDAKICAgICAgICApOwogICAgICAgIGZvciAoaW50IGk9MDsgaTxNQVhfQ0xJRU5UUzsgaSsrKQogICAgICAgICAgbWVzc2FnZVtudW1NZXNzYWdlc10ucmVjdlNlcVtpXSA9IC0xOwogICAgICAgIGxvZ1ZlcmJvc2UoIkNsaWVudCBDJTAyZCBzZW5kcyBtZXNzYWdlIE0lMDNkICglcykgdG8gZ3JvdXAgRyVkIiwgCiAgICAgICAgCW1lc3NhZ2VbbnVtTWVzc2FnZXNdLnNlbmRlcklkeCsxLAogICAgICAgIAludW1NZXNzYWdlcysxLAogICAgICAgIAltZXNzYWdlW251bU1lc3NhZ2VzXS50ZXh0LAogICAgICAgICAgbWVzc2FnZVtudW1NZXNzYWdlc10uZ3JvdXBJRAogICAgICAgICk7CiAgICAgICAgc2VuZFRvU2VydmVyKAogICAgICAgICAgbWVzc2FnZVtudW1NZXNzYWdlc10uc2VuZGVySWR4LCAKICAgICAgICAgIGNsaWVudFttZXNzYWdlW251bU1lc3NhZ2VzXS5zZW5kZXJJZHhdLnNlcnZlcklkeCwgCiAgICAgICAgICBtZXNzYWdlW251bU1lc3NhZ2VzXS50ZXh0CiAgICAgICAgKTsKICAgICAgICBudW1NZXNzYWdlcyArKzsKICAgICAgfSBlbHNlIHsKICAgICAgCW51bVdhaXRDeWNsZXMgKys7CiAgICAgIAlpZiAobnVtV2FpdEN5Y2xlcyA9PSAxKQogICAgICAJCWxvZ1ZlcmJvc2UoIldhaXRpbmcgJWQgc2Vjb25kcyBmb3Igc3RyYWdnbGVycy4uLiIsIGZpbmFsRGVsYXlTZWNvbmRzKTsKICAgICAgfQogICAgICBuZXh0WG1pdCArPSB4bWl0SW50ZXJ2YWxNaWNyb3M7CQogICAgfQoKICAgIC8qIFJlY2VpdmUgbmV3IG1lc3NhZ2VzLCBhbmQgZG8gYSBjb3VwbGUgb2Ygc2FuaXR5IGNoZWNrcyAqLwoKICAgIGZvciAoaW50IGk9MDsgaTxudW1DbGllbnRzOyBpKyspIHsKICAgICAgaWYgKEZEX0lTU0VUKGNsaWVudFtpXS5zb2NrLCAmcmRzZXQpKSB7CiAgICAgICAgc3RydWN0IHNvY2thZGRyX2luIHNlbmRlcjsKICAgICAgICBzb2NrbGVuX3Qgc2VuZGVyTGVuZ3RoID0gc2l6ZW9mKHNlbmRlcik7CiAgICAgICAgY2hhciBidWZmZXJbNjU1MzVdOwogICAgICAgIGludCBsZW4gPSByZWN2ZnJvbShjbGllbnRbaV0uc29jaywgJmJ1ZmZlciwgc2l6ZW9mKGJ1ZmZlciksIDAsIChzdHJ1Y3Qgc29ja2FkZHIqKSZzZW5kZXIsICZzZW5kZXJMZW5ndGgpOwogICAgICAgIGlmIChsZW4gPCAwKQogICAgICAgICAgcGFuaWMoIkVycm9yIGR1cmluZyByZWN2ZnJvbSAoJXMpIiwgc3RyZXJyb3IoZXJybm8pKTsKCiAgICAgICAgYnVmZmVyW2xlbl0gPSAwOwoKICAgICAgICBpZiAoYnVmZmVyWzBdID09ICc8JykgewogICAgICAgICAgY2hhciAqbXB0ciA9ICZidWZmZXJbMV07CiAgICAgICAgICB3aGlsZSAoKm1wdHIgJiYgKCptcHRyICE9ICc+JykpCiAgICAgICAgICAJbXB0cisrOwoKICAgICAgICAgIGlmICgqbXB0ciAhPSAwKSB7CiAgICAgICAgICAgIG1wdHIgKys7CiAgICAgICAgICAgIGlmICgqbXB0ciA9PSAnICcpCiAgICAgICAgICAgIAltcHRyICsrOwoKICAgICAgICAgICAgaWYgKG1wdHJbMF0gPT0gJ00nKSB7CiAgICAgICAgICAgICAgY2hhciBidWYyW3N0cmxlbihtcHRyKSsxXTsKICAgICAgICAgICAgICBzdHJjcHkoYnVmMiwgJm1wdHJbMV0pOwogICAgICAgICAgICAgIHN0cnRvayhidWYyLCAiLSIpOwogICAgICAgICAgICAgIGludCBtc2dJRCA9IGF0b2koYnVmMiktMTsKICAgICAgICAgICAgICBpZiAoKDA8PW1zZ0lEKSAmJiAobXNnSUQgPCBudW1NZXNzYWdlcykpIHsKICAgICAgICAgICAgICAgIGlmICghc3RyY21wKG1wdHIsIG1lc3NhZ2VbbXNnSURdLnRleHQpKSB7CiAgICAgICAgICAgICAgICAJbG9nVmVyYm9zZSgiQ2xpZW50IEMlMDJkIHJlY2VpdmVzIG1lc3NhZ2UgTSUwM2QgKCVzKSBhcyBzZXEgIyVkIiwgMStpLCAxK21zZ0lELCBtcHRyLCBjbGllbnRbaV0ubmV4dFJlY3ZTZXEpOwogICAgICAgICAgICAgICAgICBtZXNzYWdlW21zZ0lEXS5yZWN2U2VxW2ldID0gY2xpZW50W2ldLm5leHRSZWN2U2VxICsrOwogICAgICAKICAgICAgICAgICAgICAgICAgaWYgKCFjaGVja01lc3NhZ2VPcmRlcmluZyhtc2dJRCwgaSkpCiAgICAgICAgICAgICAgICAgIAludW1FcnJvcnMgKys7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgCXdhcm5pbmcoIkNsaWVudCBDJTAyZCByZWNlaXZlZCBhIGNvcnJ1cHRlZCBtZXNzYWdlICglcyk7IG5vIHN1Y2ggbWVzc2FnZSBoYXMgYmVlbiBzZW50IiwgMStpLCBtcHRyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgd2FybmluZygiQ2xpZW50IEMlMDJkIHJlY2VpdmVkIGEgbWVzc2FnZSB3aXRoIGFuIGludmFsaWQgbWVzc2FnZSBJRCAoJXMpIiwgMStpLCBtcHRyKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgd2FybmluZygiQ2xpZW50IEMlMDJkIHJlY2VpdmVkIGEgbWVzc2FnZSB0aGF0IHdhcyBuZXZlciBzZW50ICglcykiLCAxK2ksIG1wdHIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB3YXJuaW5nKCJDbGllbnQgQyUwMmQgcmVjZWl2ZWQgYSBtZXNzYWdlIHRoYXQgY29udGFpbmVkIGFuIG9wZW5pbmcgJzwnLCBidXQgbm8gY2xvc2luZyAnPicgKCVzKSIsIDEraSwgYnVmZmVyKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgd2FybmluZygiQ2xpZW50IEMlMDJkIHJlY2VpdmVkIGEgbWVzc2FnZSB0aGF0IGRpZCBub3QgY29udGFpbiBhIHNlbmRlciBJRCA8Li4uPiAoJXMpIiwgMStpLCBidWZmZXIpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KCiAgLyogV2UndmUgYWxyZWFkeSBjaGVja2VkIHRoZSBtZXNzYWdlIG9yZGVyaW5nIGFzIHdlIHdlbnQuIE5vdyBpdCBpcyB0aW1lIHRvIGNoZWNrIHdoZXRoZXIKICAgICBhbGwgdGhlIG1lc3NhZ2VzIGhhdmUgYmVlbiBkZWxpdmVyZWQgdG8gYWxsIHRoZSBjbGllbnRzICovCgogIG51bUVycm9ycyArPSBjb3VudE1pc3NpbmdNZXNzYWdlcygpOwogCiAgaWYgKCFudW1FcnJvcnMpCiAgCWZwcmludGYoc3RkZXJyLCAiT3JkZXJpbmcgT0tcbiIpOwogIGVsc2UKICAJZnByaW50ZihzdGRlcnIsICIlZCBvcmRlcmluZyBlcnJvcihzKSBmb3VuZFxuIiwgbnVtRXJyb3JzKTsKCgogICAvKiBRdWl0IGFsbCBjbGllbnRzICovCgogIGZvciAoaW50IGk9MDsgaTxudW1DbGllbnRzOyBpKyspIHsKICAgIGNoYXIgcXVpdENvbW1hbmRbMTAwXSA9ICIvcXVpdCI7CiAgICBsb2dWZXJib3NlKCJDbGllbnQgQyUwMmQgcXVpdHMiLCAxK2kpOwogICAgc2VuZFRvU2VydmVyKGksIGNsaWVudFtpXS5zZXJ2ZXJJZHgsIHF1aXRDb21tYW5kKTsKICB9CgogIHJldHVybiAwOwp9Cg==
tronglu123@/mydrive/ items []
tronglu123@/proxy.cc content I2luY2x1ZGUgPHN0ZGxpYi5oPgojaW5jbHVkZSA8c3RkaW8uaD4KI2luY2x1ZGUgPGFycGEvaW5ldC5oPgojaW5jbHVkZSA8c3lzL3NvY2tldC5oPgojaW5jbHVkZSA8c3RyaW5nLmg+CiNpbmNsdWRlIDxzeXMvdGltZS5oPgojaW5jbHVkZSA8YXNzZXJ0Lmg+CiNpbmNsdWRlIDxlcnJuby5oPgojaW5jbHVkZSA8dW5pc3RkLmg+CgojZGVmaW5lIHBhbmljKGEuLi4pIGRvIHsgZnByaW50ZihzdGRlcnIsIGEpOyBmcHJpbnRmKHN0ZGVyciwgIlxuIik7IGV4aXQoMSk7IH0gd2hpbGUgKDApCiNkZWZpbmUgbG9nVmVyYm9zZShhLi4uKSBkbyB7IGlmICh2ZXJib3NlKSB7IGZwcmludGYoc3RkZXJyLCBhKTsgZnByaW50ZihzdGRlcnIsICJcbiIpOyB9IH0gd2hpbGUgKDApCiNkZWZpbmUgd2FybmluZyhhLi4uKSBkbyB7IGZwcmludGYoc3RkZXJyLCBhKTsgZnByaW50ZihzdGRlcnIsICJcbiIpOyB9IHdoaWxlICgwKQojZGVmaW5lIGxvZyhhLi4uKSBkbyB7IHN0cnVjdCB0aW1ldmFsIHR2OyBnZXR0aW1lb2ZkYXkoJnR2LCBOVUxMKTsgZnByaW50ZihzdGRlcnIsICJQUlggJWQuJTAzZCAiLCAoaW50KXR2LnR2X3NlYywgKGludCkodHYudHZfdXNlYy8xMDAwKSk7IGZwcmludGYoc3RkZXJyLCBhKTsgZnByaW50ZihzdGRlcnIsICJcbiIpOyB9IHdoaWxlKDApCgojZGVmaW5lIE1BWF9TRVJWRVJTIDEwCiNkZWZpbmUgTUFYX01TR19MRU4gMTAwMAojZGVmaW5lIE1BWF9RVUVVRV9MRU4gMTAwMAoKc3RydWN0IHsKICBpbl9hZGRyX3QgaXA7CiAgaW50IHBvcnQ7CiAgaW5fYWRkcl90IGJpbmRJUDsKICBpbnQgYmluZFBvcnQ7CiAgaW50IHByb3h5U29ja2V0Owp9IHNlcnZlcltNQVhfU0VSVkVSU107CgpzdHJ1Y3QgewogIGludCBzcmNTZXJ2ZXJJZHg7CiAgaW50IGRzdFNlcnZlcklkeDsKICBsb25nIGxvbmcgeG1pdFRpbWU7CiAgY2hhciBidWZmZXJbTUFYX01TR19MRU5dOwp9IGhvbGRiYWNrUXVldWVbTUFYX1FVRVVFX0xFTl07CgppbnQgbnVtU2VydmVycyA9IDA7CmludCBxdWV1ZUxlbmd0aCA9IDA7CmJvb2wgdmVyYm9zZSA9IGZhbHNlOwoKaW50IGZpbmRTZXJ2ZXIoaW5fYWRkcl90IGlwLCBpbnQgcG9ydCwgYm9vbCB1c2VCaW5kKQp7CiAgZm9yIChpbnQgaT0wOyBpPG51bVNlcnZlcnM7IGkrKykKICAgIGlmICgoKHNlcnZlcltpXS5pcCA9PSBpcCkgJiYgKHNlcnZlcltpXS5wb3J0ID09IHBvcnQpICYmICF1c2VCaW5kKSB8fAogICAgICAgICgoc2VydmVyW2ldLmJpbmRJUCA9PSBpcCkgJiYgKHNlcnZlcltpXS5iaW5kUG9ydCA9PSBwb3J0KSAmJiB1c2VCaW5kKSkKICAgICAgcmV0dXJuIGk7CgogIHJldHVybiAtMTsKfQoKY2hhciAqcGFkZHIoaW5fYWRkcl90IGlwLCBpbnQgcG9ydCwgY2hhciAqYnVmKQp7CiAgc3RydWN0IGluX2FkZHIgYWRkcjsKICBhZGRyLnNfYWRkciA9IGlwOwogIHNwcmludGYoYnVmLCAiJXM6JWQiLCBpbmV0X250b2EoYWRkciksIHBvcnQpOwogIHJldHVybiBidWY7Cn0KCmxvbmcgbG9uZyBjdXJyZW50VGltZU1pY3JvcygpCnsKICBzdHJ1Y3QgdGltZXZhbCB0djsKICBnZXR0aW1lb2ZkYXkoJnR2LCBOVUxMKTsKICByZXR1cm4gKHR2LnR2X3NlYyoxMDAwMDAwTEwgKyB0di50dl91c2VjKTsKfQoKdm9pZCBkZWxpdmVyUXVldWVkTWVzc2FnZShpbnQgaWR4KQp7CiAgc3RydWN0IHNvY2thZGRyX2luIHRhcmdldDsKICBiemVybygodm9pZCopJnRhcmdldCwgc2l6ZW9mKHRhcmdldCkpOwogIHRhcmdldC5zaW5fZmFtaWx5ID0gQUZfSU5FVDsKICB0YXJnZXQuc2luX2FkZHIuc19hZGRyID0gc2VydmVyW2hvbGRiYWNrUXVldWVbaWR4XS5kc3RTZXJ2ZXJJZHhdLmJpbmRJUDsKICB0YXJnZXQuc2luX3BvcnQgPSBodG9ucyhzZXJ2ZXJbaG9sZGJhY2tRdWV1ZVtpZHhdLmRzdFNlcnZlcklkeF0uYmluZFBvcnQpOwoKICBjaGFyIGFkZHJidWYxWzIwMF0sIGFkZHJidWYyWzIwMF07CiAgbG9nKCJTRU5EICVzLT4lcyAnJXMnIiwgCiAgICBwYWRkcihzZXJ2ZXJbaG9sZGJhY2tRdWV1ZVtpZHhdLnNyY1NlcnZlcklkeF0uaXAsIHNlcnZlcltob2xkYmFja1F1ZXVlW2lkeF0uc3JjU2VydmVySWR4XS5wb3J0LCBhZGRyYnVmMSksIAogICAgcGFkZHIoc2VydmVyW2hvbGRiYWNrUXVldWVbaWR4XS5kc3RTZXJ2ZXJJZHhdLmJpbmRJUCwgc2VydmVyW2hvbGRiYWNrUXVldWVbaWR4XS5kc3RTZXJ2ZXJJZHhdLmJpbmRQb3J0LCBhZGRyYnVmMiksIAogICAgaG9sZGJhY2tRdWV1ZVtpZHhdLmJ1ZmZlcgogICk7CgogIGludCB3ID0gc2VuZHRvKHNlcnZlcltob2xkYmFja1F1ZXVlW2lkeF0uc3JjU2VydmVySWR4XS5wcm94eVNvY2tldCwgaG9sZGJhY2tRdWV1ZVtpZHhdLmJ1ZmZlciwgc3RybGVuKGhvbGRiYWNrUXVldWVbaWR4XS5idWZmZXIpLCAwLCAoc3RydWN0IHNvY2thZGRyKikmdGFyZ2V0LCBzaXplb2YodGFyZ2V0KSk7CiAgaWYgKHc8MCkKICAgIHBhbmljKCJzZW5kdG8oKSBmYWlsZWQgKCVzKSIsIHN0cmVycm9yKGVycm5vKSk7Cn0KCmludCBtYWluKGludCBhcmdjLCBjaGFyICphcmd2W10pCnsKICBsb25nIGxvbmcgbWF4RGVsYXlNaWNyb3MgPSA1MDAwOwogIGRvdWJsZSBsb3NzUHJvYmFiaWxpdHkgPSAwOwoKICAvKiBQYXJzZSBhcmd1bWVudHMgKi8KCiAgaW50IGM7CiAgd2hpbGUgKChjID0gZ2V0b3B0KGFyZ2MsIGFyZ3YsICJkOmw6diIpKSAhPSAtMSkgewogICAgc3dpdGNoIChjKSB7CiAgICAgIGNhc2UgJ2QnOgogICAgICAgIG1heERlbGF5TWljcm9zID0gYXRvbGwob3B0YXJnKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnbCc6CiAgICAgICAgbG9zc1Byb2JhYmlsaXR5ID0gYXRvZihvcHRhcmcpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICd2JzoKICAgICAgICB2ZXJib3NlID0gdHJ1ZTsKICAgICAgICBicmVhazsKICAgICAgZGVmYXVsdDoKICAgICAgICBmcHJpbnRmKHN0ZGVyciwgIlN5bnRheDogJXMgWy12XSBbLWQgbWF4RGVsYXlNaWNyb3NlY29uZHNdIFstbCBsb3NzUHJvYmFiaWxpdHldIHNlcnZlckxpc3RGaWxlXG4iLCBhcmd2WzBdKTsKICAgICAgICBleGl0KDEpOwogICAgfQogIH0KCiAgaWYgKG9wdGluZCAhPSAoYXJnYy0xKSkgewogICAgZnByaW50ZihzdGRlcnIsICJFcnJvcjogTmFtZSBvZiB0aGUgc2VydmVyIGxpc3QgZmlsZSBpcyBtaXNzaW5nIVxuIik7CiAgICByZXR1cm4gMTsKICB9CgogIC8qIFJlYWQgdGhlIHNlcnZlciBsaXN0ICovCgogIEZJTEUgKmluZmlsZSA9IGZvcGVuKGFyZ3Zbb3B0aW5kXSwgInIiKTsKICBpZiAoIWluZmlsZSkKICAgIHBhbmljKCJDYW5ub3QgcmVhZCBzZXJ2ZXIgbGlzdCBmcm9tICclcyciLCBhcmd2W29wdGluZF0pOwogIGNoYXIgbGluZWJ1ZlsxMDAwXTsKICB3aGlsZSAoZmdldHMobGluZWJ1Ziwgc2l6ZW9mKGxpbmVidWYpLCBpbmZpbGUpKSB7CiAgICBjaGFyICpzcHJveHlhZGRyID0gc3RydG9rKGxpbmVidWYsICIsXHJcbiIpOwogICAgY2hhciAqc3JlYWxhZGRyID0gc3Byb3h5YWRkciA/IHN0cnRvayhOVUxMLCAiLFxyXG4iKSA6IE5VTEw7CiAgICBpZiAoIXNyZWFsYWRkcikKICAgICAgcGFuaWMoIkVhY2ggbGluZSBvZiAnJXMnIG5lZWRzIHRvIGhhdmUgdHdvIElQIGFkZHJlc3NlcyBzZXBhcmF0ZWQgYnkgYSBjb21tYSEiLCBhcmd2W29wdGluZF0pOwogICAgY2hhciAqc2lwID0gc3RydG9rKHNwcm94eWFkZHIsICI6Iik7CiAgICBjaGFyICpzcG9ydCA9IHN0cnRvayhOVUxMLCAiOlxyXG4iKTsKICAgIHN0cnVjdCBpbl9hZGRyIGlwOwogICAgaW5ldF9hdG9uKHNpcCwgJmlwKTsKICAgIGlmIChudW1TZXJ2ZXJzID49IE1BWF9TRVJWRVJTKQogICAgICBwYW5pYygiVG9vIG1hbnkgc2VydmVycyBkZWZpbmVkIGluICclcycgKG1heCAlZCkiLCBhcmd2W29wdGluZF0sIE1BWF9TRVJWRVJTKTsKICAgIHNlcnZlcltudW1TZXJ2ZXJzXS5pcCA9IGlwLnNfYWRkcjsKICAgIHNlcnZlcltudW1TZXJ2ZXJzXS5wb3J0ID0gYXRvaShzcG9ydCk7CiAgICBjaGFyICpzaXAyID0gc3RydG9rKHNyZWFsYWRkciwgIjoiKTsKICAgIGNoYXIgKnNwb3J0MiA9IHN0cnRvayhOVUxMLCAiOlxyXG4iKTsKICAgIHN0cnVjdCBpbl9hZGRyIGlwMjsKICAgIGluZXRfYXRvbihzaXAyLCAmaXAyKTsKICAgIHNlcnZlcltudW1TZXJ2ZXJzXS5iaW5kSVAgPSBpcDIuc19hZGRyOwogICAgc2VydmVyW251bVNlcnZlcnNdLmJpbmRQb3J0ID0gYXRvaShzcG9ydDIpOwogICAgbnVtU2VydmVycyArKzsKICB9CiAgZmNsb3NlKGluZmlsZSk7CiAgbG9nVmVyYm9zZSgiJWQgc2VydmVyKHMpIHJlYWQgZnJvbSAnJXMnIiwgbnVtU2VydmVycywgYXJndltvcHRpbmRdKTsKCiAgLyogT3BlbiBzZXJ2ZXIgc29ja2V0cyAqLwoKICBmb3IgKGludCBpPTA7IGk8bnVtU2VydmVyczsgaSsrKSB7CiAgICBzZXJ2ZXJbaV0ucHJveHlTb2NrZXQgPSBzb2NrZXQoQUZfSU5FVCwgU09DS19ER1JBTSwgMCk7CiAgICBpZiAoc2VydmVyW2ldLnByb3h5U29ja2V0PDApCiAgICAgIHBhbmljKCJDYW5ub3Qgb3BlbiBwcm94eSBzb2NrZXQgKCVzKSIsIHN0cmVycm9yKGVycm5vKSk7CgogICAgY2hhciBhZGRyYnVmWzIwMF07CiAgICBzdHJ1Y3Qgc29ja2FkZHJfaW4gc2VydmVyQWRkcmVzczsKICAgIGJ6ZXJvKCh2b2lkKikmc2VydmVyQWRkcmVzcywgc2l6ZW9mKHNlcnZlckFkZHJlc3MpKTsKICAgIHNlcnZlckFkZHJlc3Muc2luX2ZhbWlseSA9IEFGX0lORVQ7CiAgICBzZXJ2ZXJBZGRyZXNzLnNpbl9hZGRyLnNfYWRkciA9IHNlcnZlcltpXS5pcDsKICAgIHNlcnZlckFkZHJlc3Muc2luX3BvcnQgPSBodG9ucyhzZXJ2ZXJbaV0ucG9ydCk7CiAgICBpZiAoYmluZChzZXJ2ZXJbaV0ucHJveHlTb2NrZXQsIChzdHJ1Y3Qgc29ja2FkZHIqKSZzZXJ2ZXJBZGRyZXNzLCBzaXplb2Yoc2VydmVyQWRkcmVzcykpIDwgMCkgCiAgICAgIHBhbmljKCJDYW5ub3QgYmluZCB0byAlcyAoJXMpIiwgcGFkZHIoc2VydmVyW2ldLmlwLCBzZXJ2ZXJbaV0ucG9ydCwgYWRkcmJ1ZiksIHN0cmVycm9yKGVycm5vKSk7CiAgICBsb2dWZXJib3NlKCJMaXN0ZW5pbmcgb24gJXMiLCBwYWRkcihzZXJ2ZXJbaV0uaXAsIHNlcnZlcltpXS5wb3J0LCBhZGRyYnVmKSk7CgogICAgaW50IHllcyA9IDE7CiAgICBpZiAoc2V0c29ja29wdChzZXJ2ZXJbaV0ucHJveHlTb2NrZXQsIFNPTF9TT0NLRVQsIFNPX1JFVVNFQUREUiwgJnllcywgc2l6ZW9mKHllcykpIDwgMCkKICAgICAgcGFuaWMoIkNhbm5vdCBzZXQgU09fUkVVU0VBRERSIG9wdGlvbiBvbiBzZXJ2ZXIgc29ja2V0ICglcykiLCBzdHJlcnJvcihlcnJubykpOwogIH0KCiAgLyogTWFpbiBsb29wICovCgogIGNoYXIgYWRkcmJ1ZjFbMjAwXSwgYWRkcmJ1ZjJbMjAwXTsKICB3aGlsZSAodHJ1ZSkgewoKICAgIGZkX3NldCByZHNldDsKICAgIEZEX1pFUk8oJnJkc2V0KTsKICAgIGludCBtYXhGRCA9IDA7CiAgICBmb3IgKGludCBpPTA7IGk8bnVtU2VydmVyczsgaSsrKSB7CiAgICAgIEZEX1NFVChzZXJ2ZXJbaV0ucHJveHlTb2NrZXQsICZyZHNldCk7CiAgICAgIGlmIChzZXJ2ZXJbaV0ucHJveHlTb2NrZXQgPiBtYXhGRCkKICAgICAgICBtYXhGRCA9IHNlcnZlcltpXS5wcm94eVNvY2tldDsKICAgIH0KCiAgICBsb25nIGxvbmcgZWFybGllc3REZWxpdmVyeSA9IGN1cnJlbnRUaW1lTWljcm9zKCkgKyAxMDAwMDAwOwogICAgZm9yIChpbnQgaT0wOyBpPHF1ZXVlTGVuZ3RoOyBpKyspCiAgICAgIGlmIChob2xkYmFja1F1ZXVlW2ldLnhtaXRUaW1lIDwgZWFybGllc3REZWxpdmVyeSkKICAgICAgICBlYXJsaWVzdERlbGl2ZXJ5ID0gaG9sZGJhY2tRdWV1ZVtpXS54bWl0VGltZTsKCiAgICBsb25nIGxvbmcgbWF4V2FpdE1pY3JvcyA9IGVhcmxpZXN0RGVsaXZlcnkgLSBjdXJyZW50VGltZU1pY3JvcygpOwogICAgaWYgKG1heFdhaXRNaWNyb3MgPCAxKQogICAgICBtYXhXYWl0TWljcm9zID0gMTsKCiAgICBzdHJ1Y3QgdGltZXZhbCB0djsKICAgIHR2LnR2X3NlYyA9IG1heFdhaXRNaWNyb3MgLyAxMDAwMDAwVUxMOwogICAgdHYudHZfdXNlYyA9IG1heFdhaXRNaWNyb3MgJSAxMDAwMDAwVUxMOwoKICAgIGxvZygiU2xlZXAgJWxsZCBtaWNyb3MiLCBtYXhXYWl0TWljcm9zKTsKCiAgICBpbnQgcmV0ID0gc2VsZWN0KG1heEZEKzEsICZyZHNldCwgTlVMTCwgTlVMTCwgJnR2KTsKICAgIGlmIChyZXQ8MCkKICAgICAgcGFuaWMoInNlbGVjdCgpIGZhaWxlZCAoJXMpIiwgc3RyZXJyb3IoZXJybm8pKTsKCiAgICBsb25nIGxvbmcgbm93ID0gY3VycmVudFRpbWVNaWNyb3MoKTsKICAgIGZvciAoaW50IGk9MDsgaTxxdWV1ZUxlbmd0aDsgKSB7CiAgICAgIGlmIChob2xkYmFja1F1ZXVlW2ldLnhtaXRUaW1lIDw9IG5vdykgewogICAgICAgIGRlbGl2ZXJRdWV1ZWRNZXNzYWdlKGkpOwogICAgICAgIGhvbGRiYWNrUXVldWVbaV0gPSBob2xkYmFja1F1ZXVlWy0tcXVldWVMZW5ndGhdOwogICAgICB9IGVsc2UgewogICAgICAgIGkrKzsKICAgICAgfQogICAgfQoKICAgIC8qIFJlY2VpdmUgYSBuZXcgbWVzc2FnZSAqLwoKICAgIGZvciAoaW50IGk9MDsgaTxudW1TZXJ2ZXJzOyBpKyspIHsKICAgICAgaWYgKEZEX0lTU0VUKHNlcnZlcltpXS5wcm94eVNvY2tldCwgJnJkc2V0KSkgeyAgICAgICAvLyBzZXJ2ZXJbaV0uYmluZElQLHNlcnZlcltpXS5iaW5kUG9ydCBpcyB0aGUgJ3JlYWwnIGRlc3RpbmF0aW9uIG9mIHRoaXMgcGFja2V0CiAgICAgICAgc3RydWN0IHNvY2thZGRyX2luIHNlbmRlcjsKICAgICAgICBzb2NrbGVuX3Qgc2VuZGVyTGVuZ3RoID0gc2l6ZW9mKHNlbmRlcik7CiAgICAgICAgY2hhciBidWZmZXJbNjU1MzVdOwogICAgICAgIGludCBsZW4gPSByZWN2ZnJvbShzZXJ2ZXJbaV0ucHJveHlTb2NrZXQsICZidWZmZXIsIHNpemVvZihidWZmZXIpLCAwLCAoc3RydWN0IHNvY2thZGRyKikmc2VuZGVyLCAmc2VuZGVyTGVuZ3RoKTsKICAgICAgICBpZiAobGVuIDwgMCkKICAgICAgICAgIHBhbmljKCJDYW5ub3QgcmVjdmZyb20gKCVzKSIsIHN0cmVycm9yKGVycm5vKSk7CgogICAgICAgIGJ1ZmZlcltsZW5dID0gMDsKCiAgICAgICAgaW50IHNlbmRlcklkeCA9IGZpbmRTZXJ2ZXIoc2VuZGVyLnNpbl9hZGRyLnNfYWRkciwgbnRvaHMoc2VuZGVyLnNpbl9wb3J0KSwgdHJ1ZSk7ICAvLyBzZXJ2ZXJbc2VuZGVySWR4XS5wcm94eVNvY2tldCBpcyB3aGVyZSBpdCBzaG91bGQgY29tZSBmcm9tCiAgICAgICAgaWYgKHNlbmRlcklkeCA8IDApCiAgICAgICAgICBwYW5pYygiUmVjZWl2ZWQgYSBwYWNrZXQgZnJvbSAlcywgYnV0IHRoaXMgaXNuJ3QgYW4gYWN0dWFsIGJpbmQgcG9ydCIsIHBhZGRyKHNlbmRlci5zaW5fYWRkci5zX2FkZHIsIG50b2hzKHNlbmRlci5zaW5fcG9ydCksIGFkZHJidWYxKSk7CgogICAgICAgIGxvZygiUkVDViAlcy0+JXMgJyVzJyIsIHBhZGRyKHNlbmRlci5zaW5fYWRkci5zX2FkZHIsIG50b2hzKHNlbmRlci5zaW5fcG9ydCksIGFkZHJidWYxKSwgcGFkZHIoc2VydmVyW2ldLmlwLCBzZXJ2ZXJbaV0ucG9ydCwgYWRkcmJ1ZjIpLCBidWZmZXIpOwoKICAgICAgICBpZiAocXVldWVMZW5ndGggPj0gTUFYX1FVRVVFX0xFTikKICAgICAgICAgIHBhbmljKCJUb28gbWFueSBxdWV1ZWQgbWVzc2FnZXMhIik7CgogICAgICAgIGJvb2wgaXNMb3N0ID0gKHJhbmQoKSUxMDAwKTwoaW50KShsb3NzUHJvYmFiaWxpdHkgKiAxMDAwKTsKICAgICAgICBpZiAoIWlzTG9zdCkgewogICAgICAgICAgaG9sZGJhY2tRdWV1ZVtxdWV1ZUxlbmd0aF0uc3JjU2VydmVySWR4ID0gc2VuZGVySWR4OwogICAgICAgICAgaG9sZGJhY2tRdWV1ZVtxdWV1ZUxlbmd0aF0uZHN0U2VydmVySWR4ID0gaTsKICAgICAgICAgIGhvbGRiYWNrUXVldWVbcXVldWVMZW5ndGhdLnhtaXRUaW1lID0gY3VycmVudFRpbWVNaWNyb3MoKSArIChyYW5kKCkgJSBtYXhEZWxheU1pY3Jvcyk7CiAgICAgICAgICBzdHJuY3B5KGhvbGRiYWNrUXVldWVbcXVldWVMZW5ndGhdLmJ1ZmZlciwgYnVmZmVyLCBzaXplb2YoaG9sZGJhY2tRdWV1ZVtxdWV1ZUxlbmd0aF0uYnVmZmVyKS0xKTsKICAgICAgICAgIHF1ZXVlTGVuZ3RoICsrOwogICAgICAgIH0KCiAgICAgIH0KICAgIH0KICB9CgogIHJldHVybiAwOwp9ICA=

